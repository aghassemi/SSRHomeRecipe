!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=40)}([function(e,t){e.exports=require("react")},function(e,t,n){"use strict";n.d(t,"n",(function(){return c})),n.d(t,"E",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"p",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"m",(function(){return d})),n.d(t,"D",(function(){return m})),n.d(t,"l",(function(){return h})),n.d(t,"B",(function(){return y})),n.d(t,"f",(function(){return g})),n.d(t,"x",(function(){return b})),n.d(t,"e",(function(){return v})),n.d(t,"v",(function(){return w})),n.d(t,"k",(function(){return O})),n.d(t,"A",(function(){return E})),n.d(t,"g",(function(){return R})),n.d(t,"w",(function(){return S})),n.d(t,"C",(function(){return x})),n.d(t,"s",(function(){return _})),n.d(t,"r",(function(){return k})),n.d(t,"c",(function(){return j})),n.d(t,"t",(function(){return P})),n.d(t,"z",(function(){return C})),n.d(t,"o",(function(){return D})),n.d(t,"q",(function(){return T})),n.d(t,"F",(function(){return A})),n.d(t,"d",(function(){return q})),n.d(t,"u",(function(){return I})),n.d(t,"j",(function(){return N})),n.d(t,"h",(function(){return U})),n.d(t,"y",(function(){return L}));var r=n(4),o=n.n(r);function a(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,s,"next",e)}function s(e){a(i,r,o,c,s,"throw",e)}c(void 0)}))}}var c="Signup_New_User",s=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("http://localhost:3000/auth-signup",e);case 2:r=t.sent,console.log("action----\x3esignupNewUser----\x3eres.data",r),n({type:c,payload:r.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},u="Authenticate_Account",l=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e,"auth"),t.next=3,o.a.post("http://localhost:3000/auth-login",e);case 3:if(r=t.sent,console.log("action----\x3eauthenticateAccount----\x3eres.data.msg",r,r.data.msg),!r.data.msg){t.next=9;break}return t.abrupt("return",n({type:u,payload:r.data}));case 9:return localStorage.setItem("user",r.data._id),localStorage.setItem("token",r.data.token),a={token:localStorage.getItem("token"),user:localStorage.getItem("user")},t.abrupt("return",n({type:u,payload:a}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p="Check_Auth",f="Login_Page",d="Reset_Password_Request",m=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("RESET_PASSWORD_REQUEST ",e,"---------------------\x3e"),t.next=3,o.a.post("http://localhost:3000/password-request",e);case 3:r=t.sent,console.log("action----\x3eresetPasswordRequest----\x3eres.data",r.data),n({type:d,payload:r.data});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h="Post_New_Password",y=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("POST_NEW_PASSWORD ",e,"---------------------\x3e"),t.next=3,o.a.post("http://localhost:3000/post-new-password",e);case 3:r=t.sent,console.log("action----\x3epostNewPassword----\x3eres.data",r.data),n({type:h,payload:r.data});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g="fetch_recipes",b=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e,"action->id",!global.localStorage),"Bearer ",t.next=4,o.a.get("http://localhost:3000/home-data/".concat(e));case 4:r=t.sent,console.log("FFETCH_RECIPES",r,"---------------------\x3e"),n({type:g,payload:r.data});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v="fetch_Owner_recipes",w=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!global.localStorage){t.next=9;break}return r="Bearer ".concat(global.localStorage.token),t.next=4,o.a.get("http://localhost:3000/owner-alldata/".concat(e),{headers:{Authorization:r}});case 4:a=t.sent,console.log("action----\x3efetchOwnerRecipes----\x3eres.data",a.data),n({type:v,payload:a.data}),t.next=13;break;case 9:return t.next=11,o.a.get("http://localhost:3000/owner-data/".concat(e));case 11:i=t.sent,n({type:v,payload:i.data});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O="Owner_recipes",E=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:3000/owner-data/".concat(e));case 2:r=t.sent,console.log("action----\x3efetchOwnerloadRecipes----\x3eres.data",r.data),n({type:O,payload:r.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R="fetch_recipe_detail",S=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:3000/data/".concat(e));case 2:r=t.sent,console.log("action----\x3efetchRecipeDetail----\x3eres.data",r),n({type:R,payload:r.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){console.log("POST_NEW_RECIPE",e,"---------------------\x3e");var t="Bearer ".concat(global.localStorage.token);return console.log(t,"AuthStr"),function(n){return o.a.post("http://localhost:3000/data",e,{headers:{Authorization:t}})}},_=function(e,t){console.log("EDIT_RECIPE",e,t,"---------------------\x3e");var n="Bearer ".concat(global.localStorage.token);return console.log(n,"AuthStr"),function(r){return o.a.post("http://localhost:3000/data/".concat(t),e,{headers:{Authorization:n}})}},k=function(e){console.log("DELETE_RECIPE",e,"---------------------\x3e");var t="Bearer ".concat(global.localStorage.token);return console.log(t,"AuthStr"),function(n){return o.a.post("http://localhost:3000/delete-data/".concat(e._id),e,{headers:{Authorization:t}})}},j="Fetch_Cart_Items",P=function(){return function(){var e=i(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="Bearer ".concat(global.localStorage.token),console.log(n,"AuthStr"),e.next=4,o.a.get("http://localhost:3000/cart-items",{headers:{Authorization:n}});case 4:r=e.sent,console.log("action----\x3efetchCartItems----\x3eres.data",r.data),t({type:j,payload:r.data});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:3000/cart-items/".concat(e),{headers:{Authorization:AuthStr}});case 2:r=t.sent,console.log("action----\x3efetchCartItems----\x3eres.data",r.data),n({type:j,payload:r.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=function(e){console.log("ADD_TO_CART",e,"---------------------\x3e");var t="Bearer ".concat(global.localStorage.token);return console.log(t,"AuthStr"),function(n){o.a.post("http://localhost:3000/cart-items",e,{headers:{Authorization:t}}).then((function(e){console.log(e,"response"),n(P())}))}},T=function(e){return console.log("DELETE_FROM_CART",e,"---------------------\x3e"),function(t){return o.a.post("http://localhost:3000/delete-from-cart",e).then((function(e){t(P())}))}},A=function(e){return console.log("SUBMIT_ORDER",e,"---------------------\x3e"),function(t){return o.a.post("http://localhost:3000/submit-order",e).then((function(e){console.log(e,"response"),t(I())}))}},q="Fetch_Orders",I=function(){return function(){var e=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("http://localhost:3000/submit-order");case 2:n=e.sent,console.log("action----\x3efetchOrders----\x3eres.data",n.data),t({type:q,payload:n.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N="Owner_Orders",U="Login_Out_Account",L=function(){return function(){var e=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("LOGIN_out_ACCOUNT","---------------------\x3e"),global.localStorage.clear(),console.log("action----\x3eloginOutAccount----\x3eres.data",global.localStorage),n={token:localStorage.getItem("token"),user:localStorage.getItem("user")},t({type:U,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("socket.io-client")},function(e,t){e.exports=require("react-router-config")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("bytes")},function(e,t){e.exports=require("debug")},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(17),o=n(45),a=n(46),i=n(47),c=n(48);e.exports=function(e,t,n,s,u,l){var p,f,d=l;e._body=!0;var m=null!==d.encoding?d.encoding:null,h=d.verify;try{f=function(e,t,n){var o,a=(e.headers["content-encoding"]||"identity").toLowerCase(),i=e.headers["content-length"];if(t('content-encoding "%s"',a),!1===n&&"identity"!==a)throw r(415,"content encoding unsupported",{encoding:a,type:"encoding.unsupported"});switch(a){case"deflate":o=c.createInflate(),t("inflate body"),e.pipe(o);break;case"gzip":o=c.createGunzip(),t("gunzip body"),e.pipe(o);break;case"identity":(o=e).length=i;break;default:throw r(415,'unsupported content encoding "'+a+'"',{encoding:a,type:"encoding.unsupported"})}return o}(e,u,d.inflate),p=f.length,f.length=void 0}catch(e){return n(e)}if(d.length=p,d.encoding=h?null:m,null===d.encoding&&null!==m&&!a.encodingExists(m))return n(r(415,'unsupported charset "'+m.toUpperCase()+'"',{charset:m.toLowerCase(),type:"charset.unsupported"}));u("read body"),o(f,d,(function(o,c){var l;if(o)return l="encoding.unsupported"===o.type?r(415,'unsupported charset "'+m.toUpperCase()+'"',{charset:m.toLowerCase(),type:"charset.unsupported"}):r(400,o),f.resume(),void i(e,(function(){n(r(400,l))}));if(h)try{u("verify body"),h(e,t,c,m)}catch(e){return void n(r(403,e,{body:c,type:e.type||"entity.verify.failed"}))}var p=c;try{u("parse body"),p="string"!=typeof c&&null!==m?a.decode(c,m):c,e.body=s(p)}catch(e){return void n(r(400,e,{body:p,type:e.type||"entity.parse.failed"}))}n()}))}},function(e,t){e.exports=require("type-is")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("content-type")},function(e,t){e.exports=require("http-errors")},function(e,t){e.exports=require("react-helmet")},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(23)("body-parser"),o=Object.create(null);function a(e){return function(){return function(e){var t=o[e];if(void 0!==t)return t;switch(e){case"json":t=n(44);break;case"raw":t=n(49);break;case"text":t=n(50);break;case"urlencoded":t=n(51)}return o[e]=t}(e)}}t=e.exports=r.function((function(e){var n={};if(e)for(var r in e)"type"!==r&&(n[r]=e[r]);var o=t.urlencoded(n),a=t.json(n);return function(e,t,n){a(e,t,(function(r){if(r)return n(r);o(e,t,n)}))}}),"bodyParser: use individual json/urlencoded middlewares"),Object.defineProperty(t,"json",{configurable:!0,enumerable:!0,get:a("json")}),Object.defineProperty(t,"raw",{configurable:!0,enumerable:!0,get:a("raw")}),Object.defineProperty(t,"text",{configurable:!0,enumerable:!0,get:a("text")}),Object.defineProperty(t,"urlencoded",{configurable:!0,enumerable:!0,get:a("urlencoded")})},function(e,t,n){!function(){"use strict";var t=n(54),r=n(55),o={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204};function a(e){return"string"==typeof e||e instanceof String}function i(e,t){var n,r=t.headers.origin,o=[];return e.origin&&"*"!==e.origin?a(e.origin)?(o.push([{key:"Access-Control-Allow-Origin",value:e.origin}]),o.push([{key:"Vary",value:"Origin"}])):(n=function e(t,n){if(Array.isArray(n)){for(var r=0;r<n.length;++r)if(e(t,n[r]))return!0;return!1}return a(n)?t===n:n instanceof RegExp?n.test(t):!!n}(r,e.origin),o.push([{key:"Access-Control-Allow-Origin",value:!!n&&r}]),o.push([{key:"Vary",value:"Origin"}])):o.push([{key:"Access-Control-Allow-Origin",value:"*"}]),o}function c(e){return!0===e.credentials?{key:"Access-Control-Allow-Credentials",value:"true"}:null}function s(e){var t=e.exposedHeaders;return t?(t.join&&(t=t.join(",")),t&&t.length?{key:"Access-Control-Expose-Headers",value:t}:null):null}function u(e,t){for(var n=0,o=e.length;n<o;n++){var a=e[n];a&&(Array.isArray(a)?u(a,t):"Vary"===a.key&&a.value?r(t,a.value):a.value&&t.setHeader(a.key,a.value))}}e.exports=function(e){var n=null;return n="function"==typeof e?e:function(t,n){n(null,e)},function(e,r,a){n(e,(function(n,l){if(n)a(n);else{var p=t({},o,l),f=null;p.origin&&"function"==typeof p.origin?f=p.origin:p.origin&&(f=function(e,t){t(null,p.origin)}),f?f(e.headers.origin,(function(t,n){t||!n?a(t):(p.origin=n,function(e,t,n,r){var o=[];"OPTIONS"===(t.method&&t.method.toUpperCase&&t.method.toUpperCase())?(o.push(i(e,t)),o.push(c(e)),o.push(function(e){var t=e.methods;return t.join&&(t=e.methods.join(",")),{key:"Access-Control-Allow-Methods",value:t}}(e)),o.push(function(e,t){var n=e.allowedHeaders||e.headers,r=[];return n?n.join&&(n=n.join(",")):(n=t.headers["access-control-request-headers"],r.push([{key:"Vary",value:"Access-Control-Request-Headers"}])),n&&n.length&&r.push([{key:"Access-Control-Allow-Headers",value:n}]),r}(e,t)),o.push(function(e){var t=("number"==typeof e.maxAge||e.maxAge)&&e.maxAge.toString();return t&&t.length?{key:"Access-Control-Max-Age",value:t}:null}(e)),o.push(s(e)),u(o,n),e.preflightContinue?r():(n.statusCode=e.optionsSuccessStatus,n.setHeader("Content-Length","0"),n.end())):(o.push(i(e,t)),o.push(c(e)),o.push(s(e)),u(o,n),r())}(p,e,r,a))})):a()}}))}}}()},function(e,t){e.exports=require("multer")},function(e,t,n){"use strict";var r=n(0),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f={component:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,n,r,a,f=(t=d,function(){var e,n=l(t);if(u()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function d(){return i(this,d),f.apply(this,arguments)}return n=d,(r=[{key:"render",value:function(){return o.a.createElement("div",null,"and this is the home which will be run from server side")}}])&&c(n.prototype,r),a&&c(n,a),d}(r.Component)},d={component:function(e){var t=e.staticContext,n=void 0===t?{}:t;return console.log(n),n.NotFound=!0,o.a.createElement("div",null,"Not Found!...")}},m=n(6),h=n(2),y=n(3),g=n(1);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=S(t);if(R()){var r=S(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return O(this,e)});function c(){var e;v(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(E(e=i.call.apply(i,[this].concat(n))),"state",{token:null,user:null}),_(E(e),"logout",(function(t){e.props.loginOutAccount(),e.props.history.push("/"),console.log("logout")})),e}return n=c,(r=[{key:"componentDidMount",value:function(){this.setState({token:localStorage.getItem("token"),user:localStorage.getItem("user")}),console.log("componentDidMount of apppppp",this.props),console.log(!this.state.token,"this.props.app.token")}},{key:"componentDidUpdate",value:function(e,t){console.log("app detail update",e,this.props),e.token!==this.props.token&&this.setState({token:localStorage.getItem("token"),user:localStorage.getItem("user")}),console.log(this.state.token,"this.props.app.token")}},{key:"header",value:function(){var e=this;return this.state.token?o.a.createElement("div",{className:"header"},o.a.createElement(h.Link,{to:"/",className:"header-link"},"HOME"),o.a.createElement(h.Link,{to:"/home-recipes/".concat(this.state.user,"-1"),className:"header-link"},"RECIPES"),o.a.createElement(h.Link,{to:"/add-newrecipe",className:"header-link"},"ADD RECIPE"),o.a.createElement(h.Link,{to:"/cart",className:"header-link"},"CART"),o.a.createElement(h.Link,{to:"/orders",className:"header-link"},"ORDERS"),o.a.createElement(h.Link,{to:"/my-account/".concat(this.state.user,"-1 "),className:"header-link"},"MY ACCOUNT"),o.a.createElement("button",{onClick:function(t){return e.logout(t)},className:"header-link"},"LOGOUT")):o.a.createElement("div",{className:"header"},o.a.createElement(h.Link,{to:"/",className:"header-link"},"HOME"),o.a.createElement(h.Link,{to:"/home-recipes/".concat(this.state.user,"-1"),className:"header-link"},"RECIPES"),o.a.createElement(h.Link,{to:"/add-newrecipe",className:"header-link"},"ADD RECIPE"),o.a.createElement(h.Link,{to:"/cart",className:"header-link"},"CART"),o.a.createElement(h.Link,{to:"/orders",className:"header-link"},"ORDERS"),o.a.createElement(h.Link,{to:"/my-account/0-1",className:"header-link"},"MY ACCOUNT"),o.a.createElement(h.Link,{to:"/login",className:"header-link"},"LOGIN"),o.a.createElement(h.Link,{to:"/signup",className:"header-link"},"SIGNUP"))}},{key:"render",value:function(){return o.a.createElement("div",null,this.header(),Object(m.renderRoutes)(this.props.route.routes))}}])&&w(n.prototype,r),a&&w(n,a),c}(r.Component);var j=Object(h.withRouter)({component:Object(y.connect)((function(e){return console.log(e,"mapStateToProps----\x3estate.app"),{token:e.auth.token,userid:e.auth.user}}),{loginOutAccount:g.y})(k)}),P=(n(56),n(18)),C=n(5),D=n.n(C);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=L(t);if(U()){var r=L(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return I(this,e)});function c(){var e;A(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return F(N(e=i.call.apply(i,[this].concat(n))),"state",{page:1}),e}return n=c,(r=[{key:"componentDidMount",value:function(){var e=this;this.setState({user:localStorage.getItem("user"),token:localStorage.getItem("token")}),console.log("componentDidMount of recipepage",this.props),console.log("componentDidMount of recipepage,params",localStorage.getItem("user"),this.props.match.params),this.props.fetchRecipes(this.props.match.params._id),D()("http://localhost:3000").on("recipes",(function(t){"create"===t.action?e.props.fetchRecipes(e.props.match.params._id):"edit"===t.action&&(console.log("aaaaaaaaaaaa"),e.props.fetchRecipes(e.props.match.params._id))}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;console.log("detail update",e.location.pathname,this.props.location.pathname),e.match.params._id!==this.props.match.params._id&&this.props.fetchRecipes(this.props.match.params._id),D()("http://localhost:3000").on("recipes",(function(e){"create"===e.action&&n.props.fetchRecipes(n.props.match.params._id)}))}},{key:"addToCart",value:function(e,t){this.props.addToCart(t),this.props.history.push("/cart")}},{key:"renderRecipes",value:function(){var e=this;if(console.log(this.props,"this.state.page"),this.props.pageRecipes)return this.props.pageRecipes.map((function(t,n){return console.log(t,"recipe page recipe"),e.state.token?o.a.createElement("li",{key:n,className:"recipepage-recipe"},o.a.createElement("img",{src:"/".concat(t.picUrl),className:"recipepage-img"}),o.a.createElement(h.Link,{to:"/recipes/".concat(t._id)},o.a.createElement("b",null,t.name)),o.a.createElement("button",{onClick:function(n){return e.addToCart(n,t)}},"ADD")):o.a.createElement("li",{key:n,className:"recipepage-recipe"},o.a.createElement("img",{src:"/".concat(t.picUrl),className:"recipepage-img"}),o.a.createElement(h.Link,{to:"/recipes/".concat(t._id)},o.a.createElement("b",null,t.name)))}))}},{key:"head",value:function(){return o.a.createElement(P.Helmet,null,o.a.createElement("title",null,"recipes"),o.a.createElement("meta",{property:"og:title",content:"recipes"}))}},{key:"paging",value:function(){var e=[];if(this.props.recipes){for(var t=1;t<this.props.recipes.length/9+1;t++)console.log("/home-recipes/".concat(this.state.user,"-").concat(t),"`/home-recipes/${this.state.user}-${i}`"),e.push(o.a.createElement(h.Link,{to:"/home-recipes/".concat(this.state.user,"-").concat(t)},t));return o.a.createElement("section",{className:"pagination"},e)}}},{key:"render",value:function(){return o.a.createElement("div",{className:"recipepage"},this.head(),o.a.createElement("div",{className:"recipepage"},this.renderRecipes()),this.paging())}}])&&q(n.prototype,r),a&&q(n,a),c}(r.Component);var z=Object(h.withRouter)({loadedData:function(e,t,n,r,o){return console.log(e,t,o,"loadingggggggg loadedData RecipePage"),e.dispatch(Object(g.x)(t))},component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate.recipes",e.recipes),{recipes:e.recipes.data,pageRecipes:e.recipes.pagedata,auth:e.auth}}),{fetchRecipes:g.x,addToCart:g.o})(B)});function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=$(t);if(Y()){var r=$(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return W(this,e)});function c(){return G(this,c),i.apply(this,arguments)}return n=c,(r=[{key:"componentDidMount",value:function(){var e=this;console.log("componentDidMount of detail",this.props),this.props.fetchRecipeDetail(this.props.match.params._id),D()("http://localhost:3000").on("recipes",(function(t){"edit"===t.action&&e.props.fetchRecipeDetail(e.props.match.params._id)}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;D()("http://localhost:3000").on("recipes",(function(e){"edit"===e.action&&n.props.fetchRecipeDetail(n.props.match.params._id)}))}},{key:"fetchProp",value:function(){if(null!==this.props.detail)return console.log(this.props.detail._id,"finally"),o.a.createElement("div",null,o.a.createElement("img",{src:"/".concat(this.props.detail.picUrl)}),o.a.createElement("div",null,this.props.detail.name),o.a.createElement("p",null,this.props.detail.description),o.a.createElement("div",null,this.props.detail.price))}},{key:"addToCart",value:function(e){this.props.addToCart(this.props.detail),this.props.history.push("/cart")}},{key:"deleteRecipe",value:function(e){e.preventDefault(),this.props.deleteRecipe(this.props.detail),this.props.history.push("/recipes")}},{key:"addButtons",value:function(){var e=this;if(null!==this.props.detail&&this.props.auth)return o.a.createElement("div",null,o.a.createElement("button",{onClick:function(t){return e.addToCart(t)}},"ADD"))}},{key:"render",value:function(){return o.a.createElement("div",null,"this is one of the recipe",this.fetchProp(),this.addButtons(),o.a.createElement("br",null))}}])&&V(n.prototype,r),a&&V(n,a),c}(r.Component),J=Object(h.withRouter)({loadedData:function(e,t){return console.log(e,t,"loadingggggggg loadedData Detail"),e.dispatch(Object(g.w)(t))},component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate.detail",e),{detail:e.detail,auth:e.auth,owner:e.owner}}),{fetchRecipeDetail:g.w,addToCart:g.o})(K)});function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=oe(t);if(re()){var r=oe(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return te(this,e)});function c(){var e;Z(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ie(ne(e=i.call.apply(i,[this].concat(n))),"state",{message:""}),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of cart",this.props),Object.keys(this.props.auth).length<1&&this.setState({message:"session has been expired, please login again"}),this.props.fetchCartItems(),this.setState({total:this.props.cart.total})}},{key:"componentDidUpdate",value:function(e,t){console.log("cart update",e.cart.total,this.props.cart.total),e.cart.total!==this.props.cart.total&&this.props.fetchCartItems()}},{key:"renderCart",value:function(){var e=this;if(null!==this.props.cart)return console.log(this.props.cart.items,"::"),this.props.cart.items.map((function(t,n){return o.a.createElement("div",{key:n},o.a.createElement("br",null),o.a.createElement("div",null,t.name),o.a.createElement("div",null,"quantity:",t.quantity),o.a.createElement("button",{onClick:function(n){return e.removeFromCart(n,t)}},"REMOVE"))}))}},{key:"removeFromCart",value:function(e,t){this.props.deletFromCart(t),console.log(this.props.history,"this.props.history")}},{key:"submitOrder",value:function(e){this.setState({message:"there is no checkout service at the moment"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h1",null,"CART"),this.renderCart(),o.a.createElement("br",null),o.a.createElement("div",null,this.props.cart.total),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(t){return e.submitOrder(t)}},"CHECKOUT"),o.a.createElement("div",{className:"message"},this.state.message))}}])&&ee(n.prototype,r),a&&ee(n,a),c}(r.Component);var se=Object(h.withRouter)({component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate.cart",e),{cart:e.cart,auth:e.auth}}),{fetchCartItems:g.t,deletFromCart:g.q})(ce)});function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=he(t);if(me()){var r=he(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return fe(this,e)});function c(){var e;le(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ge(de(e=i.call.apply(i,[this].concat(n))),"state",{message:""}),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of orders",this.props),Object.keys(this.props.auth).length<1&&this.setState({message:"session has been expired, please login again"})}},{key:"renderCart",value:function(){return console.log(this.props.orders.length,"this.props.orders.length"),this.props.orders.length>0?this.props.orders.map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("br",null),o.a.createElement("div",null,"ORDER# : ",e._id),o.a.createElement("div",null,"total:",e.total),o.a.createElement("a",{href:"/order/".concat(e._id)},"INVOICE"))})):o.a.createElement("div",null,"no orders yet")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"ORDERS"),this.renderCart(),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&pe(n.prototype,r),a&&pe(n,a),c}(r.Component),ve={component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate.orders",e),{orders:e.orders,auth:e.auth}}),{fetchOrders:g.u})(be)};function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?Se(e):t}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=_e(t);if(xe()){var r=_e(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Re(this,e)});function c(){var e;Oe(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return je(Se(e=i.call.apply(i,[this].concat(n))),"state",{authentication:{},message:""}),je(Se(e),"createRecipe",(function(t){var n=Object.assign({},e.state.authentication);console.log(n,"authentication"),n[t.target.id]=t.target.value,e.setState({authentication:n})})),je(Se(e),"login",(function(t){t.preventDefault(),console.log(e.state.authentication,"this.state.authentication"),e.props.authenticateAccount(e.state.authentication).then((function(t){t.payload.msg?e.setState({message:t.payload.msg.msg}):e.props.history.push("/")}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of login",this.props)}},{key:"componentDidUpdate",value:function(e,t){console.log("detail update",e,this.props,this.props.auth.msg)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.login},o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"email",type:"email",placeholder:"Email"}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"password",type:"text",placeholder:"Password"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{type:"submit"},"LOGIN"),o.a.createElement("button",{type:"submit"},o.a.createElement(h.Link,{to:"/signup",className:"header-link"},"SIGNUP")),o.a.createElement("button",null,o.a.createElement(h.Link,{to:"/reset-password-request",className:"header-link"},"RESET PASSWORD"))),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&Ee(n.prototype,r),a&&Ee(n,a),c}(r.Component);var Ce=Object(h.withRouter)({component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate.login",e),{auth:e.auth}}),{authenticateAccount:g.p})(Pe)});function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?Ie(e):t}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Ue(t);if(Ne()){var r=Ue(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return qe(this,e)});function c(){var e;Te(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Me(Ie(e=i.call.apply(i,[this].concat(n))),"state",{newUser:{},message:""}),Me(Ie(e),"createRecipe",(function(t){console.log(t.target.value,"e.target.value");var n=Object.assign({},e.state.newUser);n[t.target.id]=t.target.value,e.setState({newUser:n})})),Me(Ie(e),"signup",(function(t){t.preventDefault(),console.log(e.state.newUser,"this.state.newUser.password===this.state.newUser.confirmPassword"),e.props.signupNewUser(e.state.newUser).then((function(t){"1"===e.props.newUser?e.props.history.push("/login"):e.setState({message:e.props.msg})}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of login",this.props)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.signup,noValidate:!0},o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"name",type:"text",placeholder:"name",required:!0}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"email",type:"email",placeholder:"Email",required:!0}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"password",type:"text",placeholder:"Password",required:!0}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"confirmPassword",type:"text",placeholder:"Confirm Password",required:!0}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{type:"submit"},"SIGNUP")),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&Ae(n.prototype,r),a&&Ae(n,a),c}(r.Component);var Be=Object(h.withRouter)({component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate. Signup",e),{newUser:e.newUser}}),{signupNewUser:g.E})(Fe)});function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?We(e):t}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=$e(t);if(Ye()){var r=$e(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ve(this,e)});function c(){var e;He(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ke(We(e=i.call.apply(i,[this].concat(n))),"state",{newRecipe:{},message:""}),Ke(We(e),"createRecipe",(function(t){console.log(e.state.newRecipe,"createRecipe recipe");var n=Object.assign({},e.state.newRecipe);t.target.files?n[t.target.id]=event.target.files[0]:n[t.target.id]=t.target.value,e.setState({newRecipe:n})})),Ke(We(e),"submitNewRecipe",(function(t){t.preventDefault(),Object.keys(e.props.auth).length<1&&e.setState({message:"session has been expired, please login again"});var n=new FormData;Object.keys(e.state.newRecipe).map((function(t){console.log(t,e.state.newRecipe[t],"this.state.newRecipe[key]"),n.append(t,e.state.newRecipe[t])})),e.props.postNewRecipe(n).then((function(t){console.log(t.data,"res.data"),t.data.msg?"jwt expired"===t.data.msg?e.setState({message:"session has been expired, please login again"}):e.setState({message:t.data.msg}):e.props.history.push("/myrecipes/".concat(t.data))})).catch((function(t){return e.setState({message:res.data})}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of addrecipe",this.props),Object.keys(this.props.auth).length<1&&this.setState({message:"session has been expired, please login again"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.submitNewRecipe,encType:"multipart/form-data"},o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"name",type:"text",placeholder:"name"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"picUrl",name:"picUrl",type:"file",placeholder:"image URL"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("textarea",{onChange:function(t){return e.createRecipe(t)},id:"description",type:"text",placeholder:"description",rows:"10"}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"price",type:"text",placeholder:"price"}),o.a.createElement("br",null),o.a.createElement("button",{type:"submit"},"Submit recipe")),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&Ge(n.prototype,r),a&&Ge(n,a),c}(r.Component);var Qe=Object(h.withRouter)({component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate.detail",e),{auth:e.auth}}),{postNewRecipe:g.C,loginOutAccount:g.y})(Je)});function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?rt(e):t}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=at(t);if(ot()){var r=at(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return nt(this,e)});function c(){var e;et(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ct(rt(e=i.call.apply(i,[this].concat(n))),"state",{updatedRecipe:{},message:""}),ct(rt(e),"createRecipe",(function(t){var n=Object.assign({},e.state.updatedRecipe);t.target.files?n[t.target.id]=event.target.files[0]:n[t.target.id]=t.target.value,e.setState({updatedRecipe:n})})),ct(rt(e),"submitUpdatedRecipe",(function(t){t.preventDefault(),Object.keys(e.props.auth).length<1&&e.setState({message:"session has been expired, please login again"}),console.log("updating starts");var n=new FormData;Object.keys(e.state.updatedRecipe).map((function(t){console.log(t,e.state.updatedRecipe[t],"this.state.updatedRecipe[key]"),n.append(t,e.state.updatedRecipe[t])})),console.log(n,"updatedata"),e.props.editRecipe(n,e.props.detail._id).then((function(t){t.data.msg?e.setState({message:t.data.msg}):e.props.history.push("/myrecipes/".concat(e.props.detail._id)),console.log(t,"resolved")}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of editting",this.props),this.props.fetchRecipeDetail(this.props.match.params._id);var e=Object.assign({},this.state.updatedRecipe);this.props.detail&&(e.name=this.props.detail.name,e.price=this.props.detail.price,e.picUrl=this.props.detail.picUrl,e.description=this.props.detail.description,e._id=this.props.detail._id,this.setState({updatedRecipe:e}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h1",null,"EDIT"),o.a.createElement("form",{onSubmit:this.submitUpdatedRecipe,encType:"multipart/form-data"},o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"name",type:"text",defaultValue:this.props.detail.name||""}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"picUrl",name:"picUrl",type:"file"}),o.a.createElement("br",null),o.a.createElement("textarea",{onChange:function(t){return e.createRecipe(t)},id:"description",name:"description",type:"text",rows:"10",defaultValue:this.props.detail.description}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"price",name:"price",type:"text",defaultValue:this.props.detail.price||0}),o.a.createElement("br",null),o.a.createElement("button",{type:"submit"},"Submit recipe")),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&tt(n.prototype,r),a&&tt(n,a),c}(r.Component),ut=Object(h.withRouter)({loadedData:function(e,t){return console.log(e,t,"loadingggggggg loadedData Detail"),e.dispatch(Object(g.w)(t))},component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3eupdatestate.detail",e),{detail:e.detail,auth:e.auth}}),{editRecipe:g.s,fetchRecipeDetail:g.w})(st)});function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?mt(e):t}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=yt(t);if(ht()){var r=yt(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return dt(this,e)});function c(){var e;pt(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bt(mt(e=i.call.apply(i,[this].concat(n))),"state",{page:1,user:"",message:""}),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log(this.props.auth,"componentDidMount of myaccount",this.props.auth.msg),this.props.auth.msg&&this.setState({message:"session has been expired, please login again"}),this.setState({user:localStorage.getItem("user")}),this.props.fetchOwnerRecipes(localStorage.getItem("user")),localStorage.getItem("user")}},{key:"componentDidUpdate",value:function(e,t){console.log("detail update",e,this.props)}},{key:"renderRecipes",value:function(){var e=this;if(this.props.pageRecipes)return this.props.pageRecipes.map((function(t,n){if(e.props.auth)return o.a.createElement("li",{key:n,className:"recipepage-recipe"},o.a.createElement("img",{src:"/".concat(t.picUrl),className:"recipepage-img"}),o.a.createElement(h.Link,{to:"/myrecipes/".concat(t._id)},o.a.createElement("b",null,t.name)))}))}},{key:"paging",value:function(){var e=[];if(this.props.recipes){for(var t=1;t<this.props.recipes.length/9+1;t++)console.log("/my-account/".concat(this.state.user,"-").concat(t),"`/my-account/${this.state.user}-${i}`"),e.push(o.a.createElement(h.Link,{to:"/my-account/".concat(this.state.user,"-").concat(t)},t));return o.a.createElement("section",{className:"pagination"},e)}}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"MY ACCOUNT"),o.a.createElement("div",{className:"recipepage"},this.renderRecipes()),o.a.createElement("section",null,this.paging()),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&ft(n.prototype,r),a&&ft(n,a),c}(r.Component),wt=Object(h.withRouter)({loadedData:function(e,t,n,r,o){return console.log(e,t,o,"loadingggggggg loadedData MyAccount",e.getState()),e.dispatch(Object(g.A)(t))},component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate.detail",e),{auth:e.auth,recipes:e.ownerRecipes.ownerRecipes,pageRecipes:e.ownerRecipes.ownerRecipespage}}),{fetchOwnerRecipes:g.v,ownerRecipes:g.A})(vt)});function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){Dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _t(e,t){return!t||"object"!==Ot(t)&&"function"!=typeof t?kt(e):t}function kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Pt(t);if(jt()){var r=Pt(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return _t(this,e)});function c(){var e;St(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Dt(kt(e=i.call.apply(i,[this].concat(n))),"state",{updatedPassword:{},message:""}),Dt(kt(e),"createRecipe",(function(t){console.log(t.target.value,"e.target.value");var n=Object.assign({},e.state.updatedPassword);n[t.target.id]=t.target.value,e.setState({updatedPassword:n})})),Dt(kt(e),"updatePassword",(function(t){t.preventDefault(),console.log(e.state.updatedPassword,"this.state.updatedPassword"),e.props.postNewPassword(Rt({},e.state.updatedPassword,{},e.props.match.params)).then((function(t){e.props.history.push("/login")}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of ResetPassword",this.props),console.log("componentDidMount of ResetPassword",this.props.match.params.token)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.updatePassword},o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"password",type:"text",placeholder:"Password"}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"passwordConfirmation",type:"text",placeholder:"Password Confirmation"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{type:"submit"},"RESET PASSWORD")),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&xt(n.prototype,r),a&&xt(n,a),c}(r.Component);var At=Object(h.withRouter)({component:Object(y.connect)((function(e){console.log("mapStateToProps----\x3estate. ResetPassword",e)}),{postNewPassword:g.B})(Tt)});function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?Lt(e):t}function Lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Ft(t);if(Mt()){var r=Ft(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ut(this,e)});function c(){var e;It(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zt(Lt(e=i.call.apply(i,[this].concat(n))),"state",{email:{},message:""}),zt(Lt(e),"createRecipe",(function(t){console.log(t.target.value,"e.target.value");var n=Object.assign({},e.state.email);n[t.target.id]=t.target.value,e.setState({email:n})})),zt(Lt(e),"request",(function(t){t.preventDefault(),console.log(e.state.email,"this.state.newUser.password===this.state.newUser.confirmPassword"),e.props.resetPasswordRequest(e.state.email).then((function(t){1===e.props.exist?e.setState({message:"submitted!"}):e.setState({message:"email dosnt exist"})}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of resetPassword",this.props)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.request},o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"email",type:"email",placeholder:"email",required:!0}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{type:"submit"},"RESET PASSWORD"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{id:"message"},"message: ",this.state.message)))}}])&&Nt(n.prototype,r),a&&Nt(n,a),c}(r.Component);var Gt=Object(h.withRouter)({component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate. ResetPasswordReq",e),{exist:e.exist}}),{resetPasswordRequest:g.D})(Ht)});function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t){return!t||"object"!==Vt(t)&&"function"!=typeof t?Xt(e):t}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var en={weekday:"long",year:"numeric",month:"long",day:"numeric"},tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Jt(t);if(Kt()){var r=Jt(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return $t(this,e)});function c(){var e;Wt(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zt(Xt(e=i.call.apply(i,[this].concat(n))),"state",{Date:"",user:"",message:""}),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of detail",this.props),this.props.fetchRecipeDetail(this.props.match.params._id),this.props.detail&&this.setState({date:new Date(this.props.detail.createdAt).toLocaleDateString("en-US",en),user:localStorage.getItem("user")})}},{key:"componentDidUpdate",value:function(e,t){var n=this;console.log("detail update",e,this.props),null!==this.props.detail&&(null===e.detail?this.props.fetchRecipeDetail(this.props.detail._id):Object.keys(this.props.detail).map((function(t){e.detail[t]!==n.props.detail[t]&&n.props.fetchRecipeDetail(n.props.detail._id)})))}},{key:"fetchProp",value:function(){if(null!==this.props.detail)return console.log(this.props.detail._id,"finally"),o.a.createElement("div",null,o.a.createElement("img",{src:"/".concat(this.props.detail.picUrl),className:"detail-img"}),o.a.createElement("div",null,this.state.date),o.a.createElement("div",null,this.props.detail.name),o.a.createElement("p",null,this.props.detail.description),o.a.createElement("div",null,this.props.detail.price))}},{key:"addToCart",value:function(e){this.props.addToCart(this.props.detail),this.props.history.push("/cart")}},{key:"deleteRecipe",value:function(e){e.preventDefault(),this.props.deleteRecipe(this.props.detail),this.props.history.push("/my-account/".concat(this.state.user,"-1"))}},{key:"addButtons",value:function(){var e=this;if(null!==this.props.detail&&this.props.auth)return o.a.createElement("div",null,o.a.createElement("button",null,o.a.createElement(h.Link,{to:"/edit-recipe/".concat(this.props.detail._id)},"EDIT")),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(t){return e.deleteRecipe(t)}},"DELETE"),o.a.createElement("br",null))}},{key:"render",value:function(){return o.a.createElement("div",null,this.fetchProp(),this.addButtons(),o.a.createElement("br",null))}}])&&Yt(n.prototype,r),a&&Yt(n,a),c}(r.Component),nn=Object(h.withRouter)({loadedData:function(e,t,n,r){return console.log(e,r,"loadingggggggg loadedData fetchOwnerRecipeDetail"),e.dispatch(Object(g.w)(t))},component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate.mdetail",e),{detail:e.detail,auth:e.auth}}),{fetchRecipeDetail:g.w,deleteRecipe:g.r,addToCart:g.o})(tn)});function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t){return!t||"object"!==rn(t)&&"function"!=typeof t?sn(e):t}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function un(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=ln(t);if(un()){var r=ln(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return cn(this,e)});function c(){var e;on(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return fn(sn(e=i.call.apply(i,[this].concat(n))),"state",{payment:{}}),fn(sn(e),"createRecipe",(function(t){console.log(e.state.payment,"this.state.payment");var n=Object.assign({},e.state.payment);n[t.target.id]=t.target.value,e.setState({payment:n})})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of cart",this.props),this.props.auth||this.props.history.push("/login"),this.props.fetchCartItems(),this.setState({total:this.props.cart.total})}},{key:"componentDidUpdate",value:function(e,t){console.log("cart update",e.cart.total,this.props.cart.total),e.cart.total!==this.props.cart.total&&this.props.fetchCartItems()}},{key:"renderCart",value:function(){var e=this;if(null!==this.props.cart)return console.log(this.props.cart.items,"::"),this.props.cart.items.map((function(t,n){return o.a.createElement("div",{key:n},o.a.createElement("br",null),o.a.createElement("div",null,t.name),o.a.createElement("div",null,"quantity:",t.quantity),o.a.createElement("button",{onClick:function(n){return e.removeFromCart(n,t)}},"REMOVE"))}))}},{key:"paymentForm",value:function(){var e=this;return o.a.createElement("form",null,o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"name",type:"text",placeholder:"name"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"creditCard",type:"text",placeholder:"Credit card number"}),o.a.createElement("br",null))}},{key:"submitOrder",value:function(e){this.props.submitOrder(this.props.cart),this.props.history.push("/orders")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h1",null,"checkout"),o.a.createElement("div",{className:"order-review"},this.renderCart(),o.a.createElement("div",null,this.props.cart.total)),o.a.createElement("div",{className:"checkout-payment"},this.paymentForm()),o.a.createElement("button",{onClick:function(t){return e.submitOrder(t)},className:"checkout-button"},"PLACE ORDER"))}}])&&an(n.prototype,r),a&&an(n,a),c}(r.Component);var mn=Object(h.withRouter)({loadedData:function(e,t,n,r){return console.log(e,t,n,r,"loadingggggggg loadedData Cart"),e.dispatch(Object(g.z)(r._id))},component:Object(y.connect)((function(e){return console.log("mapStateToProps----\x3estate.cart",e),{cart:e.cart,auth:e.auth}}),{fetchCartItems:g.t,ownerCartItems:g.z,submitOrder:g.F})(dn)});function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(n),!0).forEach((function(t){gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=[yn({},j,{routes:[yn({},Qe,{path:"/add-newrecipe"}),yn({},J,{path:"/recipes/:_id",exact:!0}),yn({},nn,{path:"/myrecipes/:_id",exact:!0}),yn({},z,{path:"/home-recipes/:_id",exact:!0}),yn({},ut,{path:"/edit-recipe/:_id",exact:!0}),yn({},se,{path:"/cart",exact:!0}),yn({},mn,{path:"/checkout",exact:!0}),yn({},ve,{path:"/orders",exact:!0}),yn({},wt,{path:"/my-account/:_id",exact:!0}),yn({},Ce,{path:"/login",exact:!0}),yn({},Be,{path:"/signup",exact:!0}),yn({},Gt,{path:"/reset-password-request",exact:!0}),yn({},At,{path:"/reset-password/:token",exact:!0}),yn({},f,{path:"/",exact:!0}),yn({},d)]})]},function(e,t){e.exports=require("depd")},function(e,t,n){var r=n(13),o=r.Schema,a=new o({name:{type:String,required:!0},picUrl:{type:String},description:{type:String,required:!0},price:{type:Number,required:!0},date:{type:Number,required:!0},userId:{type:o.Types.ObjectId,ref:"User",required:!0}},{timestamps:!0});e.exports=r.model("Recipe",a)},function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(13),i=a.Schema,c=new i({name:{type:String,required:!0},email:{type:String,required:!0},password:{type:String,required:!0},posts:[{type:i.Types.ObjectId,ref:"Recipe"}],resetToken:String,resetTokenEXP:Date,cart:{items:[{recipeId:{type:i.Types.ObjectId,ref:"Recipe",required:!0},name:{type:i.Types.String,ref:"Recipe",required:!0},quantity:{type:Number,required:!0},unitPrice:{type:Number,required:!0}}],total:{type:i.Types.Number,required:!0}},orders:[{items:[{recipeId:{type:i.Types.ObjectId,ref:"Recipe",required:!0},name:{type:i.Types.String,ref:"Recipe",required:!0},quantity:{type:Number,required:!0},unitPrice:{type:Number,required:!0}}],total:{type:Number,required:!0}}]});c.methods.addToCart=function(e){console.log(e,"user schema ");var t=this.cart.items.findIndex((function(t){return t.recipeId.toString()===e._id.toString()})),n=1,o=this.cart.total+e.price,a=r(this.cart.items);t>=0?(n=this.cart.items[t].quantity+1,a[t].quantity=n):a.push({recipeId:e._id,name:e.name,quantity:n,unitPrice:e.price});var i={items:a,total:o};return this.cart=i,this.save()},c.methods.deleteFromCart=function(e){var t=this.cart.items.findIndex((function(t){return console.log(e,"-?_?_?_?_?_?",t,"-----------------"),t._id.toString()===e._id.toString()}));console.log(this.cart.items[t],"cartRecipeIndex",this.cart.total,">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>");var n=this.cart.total-this.cart.items[t].quantity*this.cart.items[t].unitPrice;return console.log(n,"total00000"),this.cart.total=n,this.cart.items.splice(t,1),this.save()},c.methods.addToOrder=function(){return console.log(this.cart,"user cart   schema "),currentOrder={item:this.cart.items,total:this.cart.total},console.log(currentOrder,"currentOrder"),this.orders.push(currentOrder),console.log(this.orders,"currentOrder"),this.cart={items:[],total:0},this.save()},c.methods.updateCart=function(e){console.log(e,"updatecartttttt",this.cart,"cartttttt");var t=this.cart.items.findIndex((function(t){return t.recipeId.toString()===e._id.toString()}));if(console.log(t,"cartRecipeIndex",this.cart.total,">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),-1!==t){var n=this.cart.total-this.cart.items[t].quantity*this.cart.items[t].unitPrice;console.log(n,"total00000"),this.cart.total=n,this.cart.items.splice(t,1)}return this.save()},c.methods.logout=function(){return this.isLoggedin=!1,this.save()},e.exports=a.model("User",c)},function(e,t,n){var r;e.exports={init:function(e){return r=n(61)(e)},getIO:function(){if(!r)throw new Error("Socket.io not initialized!");return r}}},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("express-validator")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("serialize-javascript")},function(e,t){e.exports=require("cookie-parser")},function(e,t,n){var r=n(7).Router(),o=n(57),a=n(25),i=n(28),c=i.check,s=i.body,u=(n(24),n(64));r.get("/home-data/:_id",o.getRecipes),r.get("/owner-alldata/:_id",o.getOwnerRecipes),r.get("/owner-data/:_id",o.getOwnerRecipesLoad),r.get("/data/:_id",o.getRecipe),r.post("/data",c("name").trim().isLength({min:2}),c("description").trim().isLength({min:2}),u,o.postRecipe),r.post("/data/:_id",u,o.postEditRecipe),r.post("/delete-data/:_id",u,o.postDeleteRecipe),r.get("/cart-items",u,o.getCart),r.get("/cart-items/:_id",o.ownerCart),r.post("/cart-items",u,o.postCart),r.post("/delete-from-cart",o.deleteFromCart),r.get("/submit-order",o.getSubmitOrder),r.get("/submit-order/:_id",o.getOwnerOrder),r.post("/submit-order",o.postSubmitOrder),r.get("/order/:orderId",o.getInvoice),r.post("/auth-signup",c("email").isEmail().withMessage("Please add valid email").custom((function(e,t){var n=t.req;return console.log(e,"...",n.body.email),a.find({email:e}).then((function(e){if(console.log(e,"???"),e.length>0)return Promise.reject("Email exists already, please pick a different email")}))})).normalizeEmail(),s("password","Please choose a password with minimum 8 charachters which includes just text and numbers").isLength({min:8}).isAlphanumeric().trim(),s("confirmPassword").trim().custom((function(e,t){if(e!==t.req.body.password)throw new Error("passwords have to match");return!0})),o.postUser),r.post("/auth-login",c("email").isEmail().normalizeEmail(),s("password").isLength({min:8}).isAlphanumeric().trim(),o.postLogin),r.post("/password-request",o.postNewPasswordRequest),r.post("/post-new-password",o.postNewPassword),r.post("/auth-logout",o.postLogout),r.get("/auth-login",o.getAuth),r.get("/auth-login-page",o.getLogin),e.exports=r},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("connect-mongodb-session")},function(e,t,n){"use strict";var r=n(8),o=n(1);t.a=Object(r.combineReducers)({recipes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.f:return console.log(t.payload.data,"recipereducer----FFETCH_RECIPES----\x3eaction.payload.data"),t.payload;default:return e}},detail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.g:return console.log(t.payload.data,"detailreducer--------\x3eaction.payload.data"),t.payload.data;default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],total:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.c:return console.log(t.payload,"cartreducer--------\x3eaction.payload.data"),t.payload.cart?t.payload.cart:{items:[],total:0};default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.d:return console.log(t.payload.data,"ordersreducer--------\x3eaction.payload.data"),t.payload.orders;case o.j:return console.log(t.payload,"ordersreducer--------\x3eaction.payload.data"),t.payload.orders;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.i:return console.log(t.payload,"LOGIN_PAGE payload"),t.payload.login;case o.a:return console.log(t.payload,"AUTHENTICATE_ACCOUNT payload"),t.payload;case o.b:return console.log(t.payload,"CHECK_AUTH payload"),t.payload;case o.h:return console.log(t.payload,"LOGIN_OUT_ACCOUNT payload"),t.payload;default:return e}},newUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.n:return console.log(t.payload,"SIGNUP_NEW_USER payload"),t.payload.newUser;default:return e}},passwordOwner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.l:return console.log(t.payload,"passwordupdatereducer--------\x3eaction.payload.data"),t.payload.passwordOwner;default:return e}},exist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.m:return console.log(t.payload,"passwordreducer--------\x3eaction.payload.data"),t.payload.exist;default:return e}},ownerRecipes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.e:return console.log("ownerreducer--------\x3eaction.payload.data"),t.payload;case o.k:return console.log(t.payload,"recipereducer----action.payload.ownerRecipes----\x3eaction.payload.data"),t.payload;default:return e}}})},function(e,t,n){n(41),e.exports=n(42)},function(e,t){e.exports=require("@babel/polyfill")},function(e,t,n){"use strict";n.r(t),function(e){n(43);var t=n(7),r=n.n(t),o=n(29),a=n.n(o),i=n(19),c=n.n(i),s=n(0),u=n.n(s),l=n(20),p=n.n(l),f=n(30),d=n(2),m=n(31),h=n.n(m),y=n(32),g=n.n(y),b=n(8),v=n(33),w=n.n(v),O=n(34),E=n.n(O),R=n(3),S=n(6),x=n(35),_=n.n(x),k=n(39),j=n(13),P=n.n(j),C=n(22),D=n(36),T=n.n(D),A=n(37),q=n.n(A),I=n(38),N=n.n(I),U=n(21),L=n.n(U),M=n(14),F=n.n(M),B=n(15),z=n.n(B),H=(n(65),r()());H.use(_()());var G="mongodb+srv://".concat(process.env.MONGO_USER,":").concat(process.env.MONGO_PASSWORD,"@cluster0-m4fqf.mongodb.net/").concat(process.env.MONGO_DEFAULT_DATABASE,"?retryWrites=true"),V=(N()(q.a),L.a.diskStorage({destination:function(e,t,n){n(null,"picUrl")},filename:function(e,t,n){n(null,(new Date).toISOString()+"-"+t.originalname)}})),W=F.a.createWriteStream(z.a.join("src/","access.log"),{flags:"a"});console.log(z.a.join(e,"access.log"),"???"),H.use(p()()),H.options("*",p()()),H.use(r.a.static("public")),H.use("/picUrl",r.a.static("picUrl")),H.use(c.a.json()),H.use(L()({storage:V,fileFilter:function(e,t,n){"image/png"===t.mimetype||"image/jpg"===t.mimetype||"image/jpeg"===t.mimetype?n(null,!0):n(null,!1)}}).single("picUrl")),H.use(c.a.urlencoded({extended:!0})),H.use(g()()),H.use(a()()),H.use(h()("combined",{stream:W})),H.use((function(e,t,n,r){var o=e.statusCode||500,a=e.message,i=e.data;n.status(o).send({msg:a,data:i})})),H.use("/",T.a),H.get("*",(function(e,t,n){var r=Object(b.createStore)(k.a,{},Object(b.applyMiddleware)(w.a)),o=Object(S.matchRoutes)(C.a,e.path).map((function(t){var n=t.route,o=t.match;return console.log(o,"***************match****************>",e.userId),n.loadedData?n.loadedData(r,o.params._id,e.isLoggedIn,e.user,o.path.split("/")[1]):Promise.resolve(null)}));Promise.all(o).then((function(n){var o={},a=Object(f.renderToString)(u.a.createElement(R.Provider,{store:r},u.a.createElement(d.StaticRouter,{context:o,location:e.path},u.a.createElement("div",null,Object(S.renderRoutes)(C.a)))));if(o.url)return t.redirect(301,o.url);o.NotFound&&t.status(404),t.send('\n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1"/>\n        <link href="https://fonts.googleapis.com/css?family=Righteous&display=swap" rel="stylesheet" >\n        <link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap" rel="stylesheet">\n        <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">\n        <link href="/style.css" rel="stylesheet" type="text/css">\n        <link rel="shortcut icon" href="/">\n        <basehref="/">\n        <script src="https://kit.fontawesome.com/a076d05399.js"><\/script>\n        <title>server</title>\n      </head>\n        <body>\n          <div id="root">'.concat(a,"</div>\n          <script>\n            window.INITIAL_STATE =").concat(E()(r.getState()),'\n          <\/script>\n          <script src="/bundle.js" charset="utf-8"><\/script>\n        </body>\n      </html>\n      '))}))})),P.a.connect(G,{useNewUrlParser:!0,useUnifiedTopology:!0}).then((function(e){var t=H.listen(process.env.PORT||3e3,(function(){return console.log("yesssssss")}));n(26).init(t).on("connection",(function(e){console.log("client connected")}))})).catch((function(e){console.log(e)}))}.call(this,"/")},function(e,t){e.exports=require("@babel/polyfill/noConflict")},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(9),o=n(16),a=n(17),i=n(10)("body-parser:json"),c=n(11),s=n(12);e.exports=function(e){var t=e||{},n="number"!=typeof t.limit?r.parse(t.limit||"100kb"):t.limit,p=!1!==t.inflate,f=t.reviver,d=!1!==t.strict,m=t.type||"application/json",h=t.verify||!1;if(!1!==h&&"function"!=typeof h)throw new TypeError("option verify must be function");var y="function"!=typeof m?function(e){return function(t){return Boolean(s(t,e))}}(m):m;function g(e){if(0===e.length)return{};if(d){var t=(n=e,u.exec(n)[1]);if("{"!==t&&"["!==t)throw i("strict violation"),function(e,t){var n=e.indexOf(t),r=e.substring(0,n)+"#";try{throw JSON.parse(r),new SyntaxError("strict violation")}catch(e){return l(e,{message:e.message.replace("#",t),stack:e.stack})}}(e,t)}var n;try{return i("parse json"),JSON.parse(e,f)}catch(e){throw l(e,{message:e.message,stack:e.stack})}}return function(e,t,r){if(e._body)return i("body already parsed"),void r();if(e.body=e.body||{},!s.hasBody(e))return i("skip empty body"),void r();if(i("content-type %j",e.headers["content-type"]),!y(e))return i("skip parsing"),void r();var u=function(e){try{return(o.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||"utf-8";if("utf-"!==u.substr(0,4))return i("invalid charset"),void r(a(415,'unsupported charset "'+u.toUpperCase()+'"',{charset:u,type:"charset.unsupported"}));c(e,t,r,g,i,{encoding:u,inflate:p,limit:n,verify:h})}};var u=/^[\x20\x09\x0a\x0d]*(.)/;function l(e,t){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r];"stack"!==o&&"message"!==o&&delete e[o]}return e.stack=t.stack.replace(e.message,t.message),e.message=t.message,e}},function(e,t){e.exports=require("raw-body")},function(e,t){e.exports=require("iconv-lite")},function(e,t){e.exports=require("on-finished")},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(9),o=n(10)("body-parser:raw"),a=n(11),i=n(12);e.exports=function(e){var t=e||{},n=!1!==t.inflate,c="number"!=typeof t.limit?r.parse(t.limit||"100kb"):t.limit,s=t.type||"application/octet-stream",u=t.verify||!1;if(!1!==u&&"function"!=typeof u)throw new TypeError("option verify must be function");var l="function"!=typeof s?function(e){return function(t){return Boolean(i(t,e))}}(s):s;function p(e){return e}return function(e,t,r){return e._body?(o("body already parsed"),void r()):(e.body=e.body||{},i.hasBody(e)?(o("content-type %j",e.headers["content-type"]),l(e)?void a(e,t,r,p,o,{encoding:null,inflate:n,limit:c,verify:u}):(o("skip parsing"),void r())):(o("skip empty body"),void r()))}}},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(9),o=n(16),a=n(10)("body-parser:text"),i=n(11),c=n(12);e.exports=function(e){var t=e||{},n=t.defaultCharset||"utf-8",s=!1!==t.inflate,u="number"!=typeof t.limit?r.parse(t.limit||"100kb"):t.limit,l=t.type||"text/plain",p=t.verify||!1;if(!1!==p&&"function"!=typeof p)throw new TypeError("option verify must be function");var f="function"!=typeof l?function(e){return function(t){return Boolean(c(t,e))}}(l):l;function d(e){return e}return function(e,t,r){if(e._body)return a("body already parsed"),void r();if(e.body=e.body||{},!c.hasBody(e))return a("skip empty body"),void r();if(a("content-type %j",e.headers["content-type"]),!f(e))return a("skip parsing"),void r();var l=function(e){try{return(o.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||n;i(e,t,r,d,a,{encoding:l,inflate:s,limit:u,verify:p})}}},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(9),o=n(16),a=n(17),i=n(10)("body-parser:urlencoded"),c=n(23)("body-parser"),s=n(11),u=n(12);e.exports=function(e){var t=e||{};void 0===t.extended&&c("undefined extended: provide extended option");var n=!1!==t.extended,l=!1!==t.inflate,d="number"!=typeof t.limit?r.parse(t.limit||"100kb"):t.limit,m=t.type||"application/x-www-form-urlencoded",h=t.verify||!1;if(!1!==h&&"function"!=typeof h)throw new TypeError("option verify must be function");var y=n?function(e){var t=void 0!==e.parameterLimit?e.parameterLimit:1e3,n=f("qs");if(isNaN(t)||t<1)throw new TypeError("option parameterLimit must be a positive number");isFinite(t)&&(t|=0);return function(e){var r=p(e,t);if(void 0===r)throw i("too many parameters"),a(413,"too many parameters",{type:"parameters.too.many"});var o=Math.max(100,r);return i("parse extended urlencoding"),n(e,{allowPrototypes:!0,arrayLimit:o,depth:1/0,parameterLimit:t})}}(t):function(e){var t=void 0!==e.parameterLimit?e.parameterLimit:1e3,n=f("querystring");if(isNaN(t)||t<1)throw new TypeError("option parameterLimit must be a positive number");isFinite(t)&&(t|=0);return function(e){if(void 0===p(e,t))throw i("too many parameters"),a(413,"too many parameters",{type:"parameters.too.many"});return i("parse urlencoding"),n(e,void 0,void 0,{maxKeys:t})}}(t),g="function"!=typeof m?function(e){return function(t){return Boolean(u(t,e))}}(m):m;function b(e){return e.length?y(e):{}}return function(e,t,n){if(e._body)return i("body already parsed"),void n();if(e.body=e.body||{},!u.hasBody(e))return i("skip empty body"),void n();if(i("content-type %j",e.headers["content-type"]),!g(e))return i("skip parsing"),void n();var r=function(e){try{return(o.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||"utf-8";if("utf-8"!==r)return i("invalid charset"),void n(a(415,'unsupported charset "'+r.toUpperCase()+'"',{charset:r,type:"charset.unsupported"}));s(e,t,n,b,i,{debug:i,encoding:r,inflate:l,limit:d,verify:h})}};var l=Object.create(null);function p(e,t){for(var n=0,r=0;-1!==(r=e.indexOf("&",r));)if(r++,++n===t)return;return n}function f(e){var t=l[e];if(void 0!==t)return t.parse;switch(e){case"qs":t=n(52);break;case"querystring":t=n(53)}return l[e]=t,t.parse}},function(e,t){e.exports=require("qs")},function(e,t){e.exports=require("querystring")},function(e,t){e.exports=require("object-assign")},function(e,t){e.exports=require("vary")},function(e,t){e.exports=require("prop-types")},function(e,t,n){var r=n(58),o=n(14),a=(n(15),n(59)),i=n(24),c=n(25),s=n(60),u=n(26),l=n(27),p=n(62),f=n(28).validationResult,d=n(63);d.config.update({region:"us-east-1"}),t.getRecipes=function(e,t,n){console.log("--getRecipes--",e.params._id,e.url,"---"),"null"===e.params._id.split("-")[0]?i.find().populate("userId").sort({createdAt:-1}).then((function(n){console.log(n,"recipesssssss----\x3e"),t.status(200).send({data:n,pagedata:n.slice(9*e.params._id.split("-")[1]-9,9*e.params._id.split("-")[1])})})).catch((function(e){var t=new Error(e);t.statusCode=500,n(t)})):i.find({userId:{$ne:e.params._id.split("-")[0]}}).populate("userId").sort({createdAt:-1}).then((function(n){console.log("recipesssssss"),t.status(200).send({data:n,pagedata:n.slice(9*e.params._id.split("-")[1]-9,9*e.params._id.split("-")[1])})})).catch((function(e){var t=new Error(e);t.statusCode=500,n(t)}))},t.getOwnerRecipes=function(e,t,n){console.log("--getOwnerRecipes--",e.url,e.params._id,"---"),console.log("--getOwnerRecipes--","null"!==e.params._id,"---"),"null"!==e.params._id?i.find({userId:e.params._id}).populate("userId").sort({createdAt:-1}).then((function(n){console.log(n,"get owner recipies"),n.length>9?t.send({ownerRecipes:n,ownerRecipespage:n.slice(9*e.params._id.split("-")[1]-9,9*e.params._id.split("-")[1])}):t.send({ownerRecipes:n,ownerRecipespage:n})})):t.send({ownerRecipes:[],ownerRecipespage:[]})},t.getOwnerRecipesLoad=function(e,t,n){console.log("--getOwnerRecipesLoad--",e.url,e.params,"---"),console.log("--getOwnerRecipesLoads--","0"!==e.params._id.split("-")[0],"---"),"0"!==e.params._id.split("-")[0]?i.find({userId:e.params._id.split("-")[0]}).populate("userId").sort({createdAt:-1}).then((function(n){console.log(n,"get owner recipies"),n.length>9?t.send({ownerRecipes:n,ownerRecipespage:n.slice(9*e.params._id.split("-")[1]-9,9*e.params._id.split("-")[1])}):t.send({ownerRecipes:n,ownerRecipespage:n})})):t.send({ownerRecipes:[],ownerRecipespage:[]})},t.getRecipe=function(e,t,n){var r=e.params._id;console.log("--getRecipe--",e.params,e.session,"---"),i.findById(r).then((function(e){if(console.log(e,">>>,1recipe",!e),!e){var n=new Error("recipe was not found");throw n.statusCode=404,n}t.status(200).send({data:e})})).catch((function(e){var t=new Error(e);t.statusCode=500,n(t)}))},t.postRecipe=function(e,t,n){console.log("--postRecipe--",e.body,"<----\x3e",e.userId,"---");var r=f(e),o=e.file;if(console.log(o,"*********"),o)if(r.isEmpty()){var a=new i({name:e.body.name,picUrl:o.path,description:e.body.description,price:e.body.price,userId:e.userId,date:new Date});a.save().then((function(e){console.log(e,"pagerecipe made"),u.getIO().emit("recipes",{action:"create",recipe:a}),t.send(e._id)})).catch((function(e){var t=new Error(e);t.statusCode=500,n(t)}))}else t.status(status).json({meg:message,data:data}),t.send({msg:"wrong text format"});else t.send({msg:"wrong image format"})},t.postEditRecipe=function(e,t,n){console.log("--postEditRecipe--",e.user,e.body,"---");var r=f(e),o=e.file;console.log(o,"update++"),r.isEmpty()?i.findById(e.body._id).then((function(n){n.name=e.body.name,n.price=e.body.price,o&&(a.deletFile(n.picUrl),n.picUrl=o.path),n.description=e.body.description,n.save().then((function(e){console.log("UPDATED recipe!"),u.getIO().emit("recipes",{action:"edit",recipe:n}),t.status(200).send({done:!0})}))})).catch((function(e){var t=new Error(e);t.statusCode=500,n(t)})):(t.status(status).json({meg:message,data:data}),t.send({msg:"wrong text format"}))},t.postDeleteRecipe=function(e,t,n){var r=e.params._id;return console.log("--postdeleteRecipe--",e.body,e.userId,"---"),a.deletFile(e.body.picUrl),i.findByIdAndRemove(r).then((function(){console.log("DESTROYED product"),u.getIO().emit("recipes",{action:"edit"}),t.send({done:!0})})).catch((function(e){return console.log(e)}))},t.getCart=function(e,t,n){console.log("--getCart--",e.userId,"---"),c.find({_id:e.userId}).then((function(e){console.log(e,"cart user"),t.send({cart:e[0].cart})}))},t.ownerCart=function(e,t,n){console.log("--ownerCart--",e.params._id,e.user,"---"),c.find({_id:e.params._id}).then((function(e){console.log(e,"ownecart"),t.send({cart:e[0].cart})}))},t.postCart=function(e,t,n){return console.log("--postCart--",e.userId,"---"),i.findById(e.body._id).then((function(t){return c.find({_id:e.userId}).then((function(e){return console.log(e,"postcart user"),e[0].addToCart(t)}))})).then((function(e){return t.status(200).send(e)})).catch((function(e){console.log(e,"postCart"),t.status(500).send(e)}))},t.deleteFromCart=function(e,t,n){return console.log("--deleteFromCart--",e.user,"---"),e.user.deleteFromCart(e.body).then((function(e){return t.status(200).send(e)})).catch((function(e){console.log(e,"deleteFromCart"),t.status(500).send(e)}))},t.getSubmitOrder=function(e,t,n){console.log("--getSubmitOrder--",e.params._id,e.user,"---"),t.send({orders:e.user.orders})},t.getOwnerOrder=function(e,t,n){console.log("--getOwnerOrder--",e.params,e.user,"---"),c.find({_id:e.params._id}).then((function(e){console.log(e,"user of orders"),t.send({orders:e[0].orders})}))},t.postSubmitOrder=function(e,t,n){return console.log("--postSubmitOrder--",e.params._id,e.user,"---"),e.user.addToOrder().then((function(e){console.log(e,"req.user.orders response"),t.redirect("/submit-order")})).catch((function(e){return console.log(e)}))},t.getInvoice=function(e,t,n){console.log("--getInvoice--",e.params,e.body,e.user,"---"),c.find({_id:e.user._id}).then((function(n){console.log(n[0],"user");var r=n[0].orders.find((function(t){return t._id.toString()===e.params.orderId}));console.log(r,"order==","invoice-".concat(r._id,".pdf"));var a=new s;t.setHeader("Content-Type","application/pdf"),t.setHeader("Content-Disposition","attachment; filename=quote.pdf"),a.pipe(o.createWriteStream("data/invoices/invoice-".concat(r._id,".pdf"))),a.pipe(t),a.fontSize(12).text("invoice-".concat(r._id)),a.text("------------------------------------"),r.items.map((function(e){a.fontSize(10).text("".concat(e.name,"--------").concat(e.quantity,"*").concat(e.unitPrice))})),a.text("------------------------------------"),a.fontSize(12).text("total:".concat(r.total)),a.end()}))},t.postUser=function(e,t,n){console.log("--postUser--",e.body,"---");var r=f(e);if(r.isEmpty())return p.hash(e.body.password,12).then((function(n){new c({name:e.body.name,email:e.body.email,password:n,cart:{item:[],total:0},orders:[]}).save().then((function(n){t.send({newUser:"1"}),console.log(e.body.email,"req.body.email");var r=new d.SES({apiVersion:"2010-12-01"}).sendEmail({Destination:{ToAddresses:["lailysarvarian@gmail.com"]},Message:{Body:{Html:{Charset:"UTF-8",Data:"<p> yeyyy</p>"},Text:{Charset:"UTF-8",Data:"TEXT_FORMAT_BODY"}},Subject:{Charset:"UTF-8",Data:"Test email"}},Source:"laily@lailys.com"}).promise();return r.then((function(e){console.log(e.MessageId)})).catch((function(e){console.error(e,e.stack)})),r.then((function(e){console.log("email has been sent")})).catch((function(e){console.error(e,e.stack)}))}))})).catch((function(e){console.log(e,"deleteFromCart"),t.status(500).send(e)}));console.log(r.array(),"err.array()"),t.send({msg:r.array()[0].msg})},t.postLogin=function(e,t,n){console.log("--postLogin--",e.body,"---");var r=f(e);r.isEmpty()?c.findOne({email:e.body.email}).then((function(n){n?n&&p.compare(e.body.password,n.password).then((function(e){if(e){if(e){var r=l.sign({email:n.email,_id:n._id.toString()},"somesupersecretsecret",{expiresIn:"1h"});t.send({token:r,_id:n._id.toString()})}}else t.send({msg:"no user with this information exists"})})):t.send({msg:"no user with this information exists"})})).catch((function(e){console.log(e,"deleteFromCart"),t.status(500).send(e)})):(console.log(r.array()[0],"err.array()"),t.send({msg:r.array()[0]}))},t.postNewPasswordRequest=function(e,t,n){console.log("--postNewPasswordRequest--",e.body,"---"),r.randomBytes(32,(function(n,r){if(console.log("-----"),n)return t.redirect("/");var o=r.toString("hex");c.findOne({email:e.body.email}).then((function(e){if(e)return e.resetToken=o,e.resetTokenEXP=Date.now()+36e5,e.save();t.send({exist:-1})})).then((function(e){t.send({exist:1}),d.config.update({region:"us-east-1"});var n={Destination:{ToAddresses:["lailysarvarian@gmail.com"]},Message:{Body:{Html:{Charset:"UTF-8",Data:'<p> <a href="http://localhost:3000/reset-password/'.concat(o,'">link</a> </p>')},Text:{Charset:"UTF-8",Data:"TEXT_FORMAT_BODY"}},Subject:{Charset:"UTF-8",Data:"Test email"}},Source:"laily@lailys.com"},r=new d.SES({apiVersion:"2010-12-01"}).sendEmail(n).promise();r.then((function(e){console.log(e.MessageId)})).catch((function(e){console.error(e,e.stack)})),r.then((function(e){console.log(e.MessageId)})).catch((function(e){console.error(e,e.stack)}))})).catch((function(e){return console.log(e)}))}))},t.postNewPassword=function(e,t,n){console.log("--postNewPassword --",e.body,"---"),c.findOne({resetToken:e.body.token,resetTokenEXP:{$gt:Date.now()}}).then((function(n){e.body.password!==e.body.passwordConfirmation?t.send({passUPdated:"00"}):p.hash(e.body.password,12).then((function(e){n.password=e,n.save().then((function(e){t.send({passwordOwner:n._id.toString()})}))}))})).catch((function(e){return console.log(e)}))},t.postLogout=function(e,t,n){console.log("--postLogout--",e.body,"---"),t.send({auth:!1})},t.getLogin=function(e,t,n){console.log(e.session.isLoggedIn,"req.session.isLoggedIn"),t.send({auth:!1})},t.getAuth=function(e,t,n){console.log("--getAuth--",e,"---"),t.send({auth:!0})}},function(e,t){e.exports=require("crypto")},function(e,t,n){var r=n(14);t.deletFile=function(e){r.unlink(e,(function(e){if(e)throw e}))}},function(e,t){e.exports=require("pdfkit")},function(e,t){e.exports=require("socket.io")},function(e,t){e.exports=require("bcryptjs")},function(e,t){e.exports=require("aws-sdk")},function(e,t,n){var r=n(27);e.exports=function(e,t,n){console.log(e.get("Authorization"),"req.get('Authorization')");var o=e.get("Authorization");if(!o){var a=new Error("Not authenticated.");throw a.statusCode=401,a}var i,c=o.split(" ")[1];try{i=r.verify(c,"somesupersecretsecret")}catch(e){console.log(e,"erryyyyyy"),t.send({msg:"jwt expired"})}if(!i){console.log(err,"erryyyyyy");var s=new Error("Not authenticated.");throw s.statusCode=401,s}e.userId=i._id,n()}},function(e,t){e.exports=require("https")}]);