!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=41)}([function(e,t){e.exports=require("react")},function(e,t,n){"use strict";n.d(t,"p",(function(){return c})),n.d(t,"J",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"s",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"o",(function(){return d})),n.d(t,"I",(function(){return m})),n.d(t,"n",(function(){return h})),n.d(t,"G",(function(){return y})),n.d(t,"g",(function(){return g})),n.d(t,"B",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"z",(function(){return w})),n.d(t,"m",(function(){return E})),n.d(t,"F",(function(){return O})),n.d(t,"h",(function(){return R})),n.d(t,"A",(function(){return S})),n.d(t,"H",(function(){return k})),n.d(t,"w",(function(){return C})),n.d(t,"v",(function(){return _})),n.d(t,"k",(function(){return x})),n.d(t,"D",(function(){return N})),n.d(t,"c",(function(){return j})),n.d(t,"t",(function(){return P})),n.d(t,"d",(function(){return I})),n.d(t,"x",(function(){return D})),n.d(t,"E",(function(){return T})),n.d(t,"r",(function(){return A})),n.d(t,"u",(function(){return q})),n.d(t,"K",(function(){return U})),n.d(t,"e",(function(){return M})),n.d(t,"y",(function(){return L})),n.d(t,"l",(function(){return F})),n.d(t,"q",(function(){return B})),n.d(t,"i",(function(){return G})),n.d(t,"C",(function(){return z}));var r=n(4),o=n.n(r);function a(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,s,"next",e)}function s(e){a(i,r,o,c,s,"throw",e)}c(void 0)}))}}var c="Signup_New_User",s=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("http://localhost:3000/auth-signup",e);case 2:return r=t.sent,console.log("action----\x3esignupNewUser----\x3eres.data",r,!r.msg),t.abrupt("return",n({type:c,payload:r.data}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},u="Authenticate_Account",l=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e,"auth"),t.next=3,o.a.post("http://localhost:3000/auth-login",e);case 3:if(r=t.sent,console.log("action----\x3eauthenticateAccount----\x3eres.data.msg",r,r.data.msg),!r.data.msg){t.next=9;break}return t.abrupt("return",n({type:u,payload:r.data}));case 9:return localStorage.setItem("user",r.data._id),localStorage.setItem("token",r.data.token),a={token:localStorage.getItem("token"),user:localStorage.getItem("user")},t.abrupt("return",n({type:u,payload:a}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p="Check_Auth",f="Login_Page",d="Reset_Password_Request",m=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("RESET_PASSWORD_REQUEST ",e,"---------------------\x3e"),t.next=3,o.a.post("http://localhost:3000/password-request",e);case 3:r=t.sent,console.log("action----\x3eresetPasswordRequest----\x3eres.data",r.data),n({type:d,payload:r.data});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h="Post_New_Password",y=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("POST_NEW_PASSWORD ",e,"---------------------\x3e"),t.next=3,o.a.post("http://localhost:3000/post-new-password",e);case 3:r=t.sent,console.log("action----\x3epostNewPassword----\x3eres.data",r.data),n({type:h,payload:r.data});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g="fetch_recipes",b=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e,"action->id",!global.localStorage),"Bearer ",t.next=4,o.a.get("http://localhost:3000/home-data/".concat(e));case 4:r=t.sent,console.log("FFETCH_RECIPES",r,"---------------------\x3e"),n({type:g,payload:r.data});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v="fetch_Owner_recipes",w=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e,">>>>>"),!global.localStorage){t.next=10;break}return r="Bearer ".concat(global.localStorage.token),t.next=5,o.a.get("http://localhost:3000/owner-alldata/".concat(e),{headers:{Authorization:r}});case 5:a=t.sent,console.log("action----\x3efetchOwnerRecipes----\x3eres.data",a.data),n({type:v,payload:a.data}),t.next=14;break;case 10:return t.next=12,o.a.get("http://localhost:3000/owner-data/".concat(e));case 12:i=t.sent,n({type:v,payload:i.data});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E="Owner_recipes",O=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:3000/owner-data/".concat(e));case 2:r=t.sent,console.log("action----\x3efetchOwnerloadRecipes----\x3eres.data",r.data),n({type:E,payload:r.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R="fetch_recipe_detail",S=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:3000/data/".concat(e));case 2:r=t.sent,console.log("action----\x3efetchRecipeDetail----\x3eres.data",r),n({type:R,payload:r.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e){console.log("POST_NEW_RECIPE",e,"---------------------\x3e");var t="Bearer ".concat(global.localStorage.token);return console.log(t,"AuthStr"),function(n){return o.a.post("http://localhost:3000/data",e,{headers:{Authorization:t}})}},C=function(e,t){console.log("EDIT_RECIPE",e,t,"---------------------\x3e");var n="Bearer ".concat(global.localStorage.token);return console.log(n,"AuthStr"),function(r){return o.a.post("http://localhost:3000/data/".concat(t),e,{headers:{Authorization:n}})}},_=function(e){console.log("DELETE_RECIPE",e,"---------------------\x3e");var t="Bearer ".concat(global.localStorage.token);return console.log(t,"AuthStr"),function(n){return o.a.post("http://localhost:3000/delete-data/".concat(e._id),e,{headers:{Authorization:t}})}},x="Open_Cart",N=function(){return function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("cart","1"),console.log(localStorage.getItem("cart")," console.log(localStorage.getItem('cart'))"),t({type:x,payload:localStorage.getItem("cart")});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j="Close_Cart",P=function(){return function(){var e=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("cart"),console.log(localStorage.getItem("cart")," console.log(localStorage.getItem('cart'))-----"),t({type:j,payload:localStorage.getItem("cart")});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I="Fetch_Cart_Items",D=function(){return function(){var e=i(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="Bearer ".concat(global.localStorage.token),console.log(n,"AuthStr"),e.next=4,o.a.get("http://localhost:3000/cart-items",{headers:{Authorization:n}});case 4:r=e.sent,console.log("action----\x3efetchCartItems----\x3eres.data",r.data),t({type:I,payload:r.data});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T=function(e){return function(){var t=i(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:3000/cart-items/".concat(e),{headers:{Authorization:AuthStr}});case 2:r=t.sent,console.log("action----\x3efetchCartItems----\x3eres.data",r.data),n({type:I,payload:r.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e){console.log("ADD_TO_CART",e,"---------------------\x3e");var t="Bearer ".concat(global.localStorage.token);return console.log(t,"AuthStr"),function(n){o.a.post("http://localhost:3000/cart-items",e,{headers:{Authorization:t}}).then((function(e){console.log(e,"response"),n(D())}))}},q=function(e,t){return console.log("DELETE_FROM_CART",e,t,"---------------------\x3e"),function(n){return o.a.post("http://localhost:3000/delete-from-cart",{data:e,id:t}).then((function(e){n(D())}))}},U=function(e){return console.log("SUBMIT_ORDER",e,"---------------------\x3e"),function(t){return o.a.post("http://localhost:3000/submit-order",e).then((function(e){console.log(e,"response"),t(L())}))}},M="Fetch_Orders",L=function(){return function(){var e=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("http://localhost:3000/submit-order");case 2:n=e.sent,console.log("action----\x3efetchOrders----\x3eres.data",n.data),t({type:M,payload:n.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F="Owner_Orders",B=function(e,t,n){return function(){var r=i(regeneratorRuntime.mark((function r(a){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("ADD_COMMENT",e,t,n,"---------------------\x3e"),r.next=3,o.a.post("http://localhost:3000/submit-comment",{data:e,id:t,userId:n});case 3:i=r.sent,console.log("action----\x3eADD_COMMENT----\x3eres.data",i);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},G="Login_Out_Account",z=function(){return function(){var e=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("LOGIN_out_ACCOUNT","---------------------\x3e"),global.localStorage.clear(),console.log("action----\x3eloginOutAccount----\x3eres.data",global.localStorage),n={token:localStorage.getItem("token"),user:localStorage.getItem("user")},t({type:G,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("socket.io-client")},function(e,t){e.exports=require("react-router-config")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("bytes")},function(e,t){e.exports=require("debug")},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(18),o=n(46),a=n(47),i=n(48),c=n(49);e.exports=function(e,t,n,s,u,l){var p,f,d=l;e._body=!0;var m=null!==d.encoding?d.encoding:null,h=d.verify;try{f=function(e,t,n){var o,a=(e.headers["content-encoding"]||"identity").toLowerCase(),i=e.headers["content-length"];if(t('content-encoding "%s"',a),!1===n&&"identity"!==a)throw r(415,"content encoding unsupported",{encoding:a,type:"encoding.unsupported"});switch(a){case"deflate":o=c.createInflate(),t("inflate body"),e.pipe(o);break;case"gzip":o=c.createGunzip(),t("gunzip body"),e.pipe(o);break;case"identity":(o=e).length=i;break;default:throw r(415,'unsupported content encoding "'+a+'"',{encoding:a,type:"encoding.unsupported"})}return o}(e,u,d.inflate),p=f.length,f.length=void 0}catch(e){return n(e)}if(d.length=p,d.encoding=h?null:m,null===d.encoding&&null!==m&&!a.encodingExists(m))return n(r(415,'unsupported charset "'+m.toUpperCase()+'"',{charset:m.toLowerCase(),type:"charset.unsupported"}));u("read body"),o(f,d,(function(o,c){var l;if(o)return l="encoding.unsupported"===o.type?r(415,'unsupported charset "'+m.toUpperCase()+'"',{charset:m.toLowerCase(),type:"charset.unsupported"}):r(400,o),f.resume(),void i(e,(function(){n(r(400,l))}));if(h)try{u("verify body"),h(e,t,c,m)}catch(e){return void n(r(403,e,{body:c,type:e.type||"entity.verify.failed"}))}var p=c;try{u("parse body"),p="string"!=typeof c&&null!==m?a.decode(c,m):c,e.body=s(p)}catch(e){return void n(r(400,e,{body:p,type:e.type||"entity.parse.failed"}))}n()}))}},function(e,t){e.exports=require("type-is")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("react-helmet")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("content-type")},function(e,t){e.exports=require("http-errors")},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(22)("body-parser"),o=Object.create(null);function a(e){return function(){return function(e){var t=o[e];if(void 0!==t)return t;switch(e){case"json":t=n(45);break;case"raw":t=n(50);break;case"text":t=n(51);break;case"urlencoded":t=n(52)}return o[e]=t}(e)}}t=e.exports=r.function((function(e){var n={};if(e)for(var r in e)"type"!==r&&(n[r]=e[r]);var o=t.urlencoded(n),a=t.json(n);return function(e,t,n){a(e,t,(function(r){if(r)return n(r);o(e,t,n)}))}}),"bodyParser: use individual json/urlencoded middlewares"),Object.defineProperty(t,"json",{configurable:!0,enumerable:!0,get:a("json")}),Object.defineProperty(t,"raw",{configurable:!0,enumerable:!0,get:a("raw")}),Object.defineProperty(t,"text",{configurable:!0,enumerable:!0,get:a("text")}),Object.defineProperty(t,"urlencoded",{configurable:!0,enumerable:!0,get:a("urlencoded")})},function(e,t){e.exports=require("multer")},function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(3),i=(n(23),n(1)),c=n(2),s=n(6),u=n(14),l=n(5),p=n.n(l);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,e);var t,n,r,a,i=(t=s,function(){var e,n=g(t);if(y()){var r=g(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return h(this,e)});function s(){return d(this,s),i.apply(this,arguments)}return n=s,(r=[{key:"componentDidMount",value:function(){var e=this;this.props.fetchRecipes("null"),p()("http://localhost:3000").on("recipes",(function(t){"create"===t.action?e.props.fetchRecipes(e.props.match.params._id):"edit"===t.action&&(console.log("aaaaaaaaaaaa"),e.props.fetchRecipes(e.props.match.params._id))}))}},{key:"topten",value:function(){if(console.log(this.props.recipes,"this.props.recipes.slice(0, 11)"),this.props.recipes)return this.props.recipes.slice(0,10).map((function(e,t){return o.a.createElement("div",{key:t,className:"topten-recipe"},o.a.createElement(c.Link,{to:"/recipes/".concat(e._id),className:"topten-recipe-link"},o.a.createElement("img",{src:"/".concat(e.picUrl),className:"recipepage-img"}),o.a.createElement("div",{className:"topten-recipe-name"},e.name)))}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"home"},o.a.createElement("div",{id:"image"}),o.a.createElement("div",{id:"recent"},o.a.createElement("div",{className:"top-ten"},o.a.createElement("div",{className:"top-ten-title"}," TOP TEN"),o.a.createElement("div",{className:"topten-scroll"},o.a.createElement("div",{className:"topten-container"},this.topten()))),o.a.createElement("div",{className:"categories-title"}," CATEGORIES"),o.a.createElement("div",{className:"category-type"},o.a.createElement("div",{className:"type-meal"},"MEAL"),o.a.createElement("div",{className:"type-pastry"},"PASTRY"),o.a.createElement("div",{className:"type-drink"},"DRINKS"),o.a.createElement("div",{className:"type-ice"},"ICE CREAM"))))}}])&&m(n.prototype,r),a&&m(n,a),s}(r.Component);var w=Object(c.withRouter)({component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate.recipes home",e.recipes),{recipes:e.recipes.data,auth:e.auth}}),{fetchRecipes:i.B})(v)}),E={component:function(e){var t=e.staticContext,n=void 0===t?{}:t;return console.log(n),n.NotFound=!0,o.a.createElement("div",null,"Not Found!...")}};function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=x(t);if(_()){var r=x(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return k(this,e)});function c(){var e;R(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return j(C(e=i.call.apply(i,[this].concat(n))),"state",{message:""}),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of cart",this.props),Object.keys(this.props.auth).length<1&&this.setState({message:"session has been expired, please login again"}),this.props.fetchCartItems(),this.setState({total:this.props.cart.total})}},{key:"componentDidUpdate",value:function(e,t){console.log("cart update",e.cart.total,this.props.cart.total),e.cart.total!==this.props.cart.total&&this.props.fetchCartItems()}},{key:"renderCart",value:function(){var e=this;if(null!==this.props.cart)return console.log(this.props.cart.items,"::"),this.props.cart.items.map((function(t,n){return o.a.createElement("div",{key:n,className:"cart-item"},o.a.createElement("div",{className:"cart-item-number"},o.a.createElement("div",null,t.name),o.a.createElement("div",null,"quantity:",t.quantity),o.a.createElement("button",{onClick:function(n){return e.removeFromCart(n,t)}},"REMOVE")))}))}},{key:"removeFromCart",value:function(e,t){this.props.deletFromCart(t),console.log(this.props.history,"this.props.history")}},{key:"submitOrder",value:function(e){this.setState({message:"there is no checkout service at the moment"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"cart-page"},o.a.createElement("div",{className:"cart-title"},"CART"),this.renderCart(),o.a.createElement("br",null),o.a.createElement("div",null,this.props.cart.total),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(t){return e.submitOrder(t)}},"CHECKOUT"),o.a.createElement("div",{className:"message"},this.state.message))}}])&&S(n.prototype,r),a&&S(n,a),c}(r.Component);Object(c.withRouter)({component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate.cart",e),{cart:e.cart,auth:e.auth}}),{fetchCartItems:i.x,deletFromCart:i.u})(P)});function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?q(e):t}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B="undefined"!=typeof window,G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(u,e);var t,n,r,a,i=(t=u,function(){var e,n=M(t);if(U()){var r=M(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return A(this,e)});function u(){var e;D(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return F(q(e=i.call.apply(i,[this].concat(n))),"state",{token:null,user:null,menuId:"",timesId:"",button:0,menulistId:"",barPosition:"left -50vh",message:"",cart:"",cartButton:0}),F(q(e),"openCart",(function(t){""===e.state.cart?e.setState({cart:"cart-clicked",cartButton:1}):"cart-clicked"===e.state.cart&&(e.props.closeCart(),e.setState({cart:"",cartButton:0}))})),F(q(e),"openMenu",(function(){0===e.state.button&&e.setState({menuId:"menu-clicked",timesId:"times-clicked",menulistId:"menu-list-clicked",cart:"",cartButton:0}),console.log(document.body),e.props.closeCart(),e.setState({cart:"",cartButton:0}),e.setState({button:1})})),F(q(e),"closeMenu",(function(){console.log("yes"),1===e.state.button&&e.setState({menuId:"",timesId:"",menulistId:""}),e.props.closeCart(),e.setState({cart:"",cartButton:0}),e.setState({button:0})})),F(q(e),"closeByMenuClick",(function(t){console.log("yes",e.state.menuId,"",e.state.timesId,"",e.state.menulistId,"",e.state.button),t.preventDefault(),e.setState({menuId:"",timesId:"",menulistId:"",button:0})})),F(q(e),"logout",(function(t){e.props.loginOutAccount(),e.props.history.push("/"),console.log("logout")})),F(q(e),"getScrollPosition",(function(t){var n=t.element,r=t.useWindow;console.log("ahaaa"),B||e.setState({barPosition:"left -200vh"});var o=(n?n.current:document.body).getBoundingClientRect();r?e.setState({barPosition:"left ".concat(100*window.scrollY/window.innerHeight-70,"vh")}):e.setState({barPosition:"left ".concat(100*o.top/window.innerHeight-70,"vh")});console.log(e.state.barPosition)})),e}return n=u,(r=[{key:"componentDidMount",value:function(){this.setState({token:localStorage.getItem("token"),user:localStorage.getItem("user"),total:this.props.cart.total}),window.addEventListener("scroll",this.getScrollPosition),this.props.fetchCartItems(),console.log(this.props.openCart,"carttttttttttttttt didmount")}},{key:"componentDidUpdate",value:function(e,t){console.log(this.props.cartOpen,"carttttttttttttttt updateeeeeeeeeeeeeeeeeeee"),e.token!==this.props.token&&this.setState({token:localStorage.getItem("token"),user:localStorage.getItem("user")}),e.cart.total!==this.props.cart.total&&this.props.fetchCartItems(),e.openCart!==this.props.openCart&&(this.props.openCart?this.setState({cart:"cart-clicked",cartButton:1}):this.setState({cart:"",cartButton:0}))}},{key:"side",value:function(){var e=this;return this.state.user?(console.log(this.state.user,"====+++------"),o.a.createElement("div",{className:"side-menu"},o.a.createElement("div",{className:"menu-circle",id:this.state.menuId,onClick:this.openMenu}),o.a.createElement("i",{className:"fas fa-times",id:this.state.timesId,onClick:function(t){return e.closeMenu(t)},"aria-hidden":"true"}),o.a.createElement(c.Link,{to:"/my-account/".concat(this.state.user,"-1"),className:"fas fa-user link higher",onClick:function(t){return e.closeMenu(t)}}),o.a.createElement("i",{className:"fas fa-search link higher"}),o.a.createElement("i",{onClick:function(t){return e.openCart()},className:"fa fa-shopping-bag link higher"}),o.a.createElement("div",{className:"menu-list",id:this.state.menulistId},o.a.createElement(c.Link,{to:"/",className:"header-link",onClick:this.closeMenu},"HOME"),o.a.createElement(c.Link,{to:"/my-account/0-1",className:"header-link",onClick:this.closeMenu},"MY ACCOUNT"),o.a.createElement(c.Link,{to:"/add-newrecipe",className:"header-link",onClick:this.closeMenu},"ADD RECIPE"),o.a.createElement(c.Link,{to:"/home-recipes/".concat(this.state.user,"-1"),className:"header-link",onClick:this.closeMenu},"RECIPES"),o.a.createElement(c.Link,{to:"/orders",className:"header-link",onClick:this.closeMenu},"ORDERS")))):o.a.createElement("div",{className:"side-menu"},o.a.createElement("div",{className:"menu-circle",id:this.state.menuId,onClick:this.openMenu}),o.a.createElement("i",{className:"fas fa-times",id:this.state.timesId,onClick:this.closeMenu,"aria-hidden":"true"}),o.a.createElement(c.Link,{to:"/my-account/0-1",className:"fas fa-user link higher",onClick:function(t){return e.closeMenu(t)}}),o.a.createElement("i",{to:"/my-account/0-1",className:"fas fa-search link higher"}),o.a.createElement("i",{onClick:function(t){return e.openCart()},className:"fa fa-shopping-bag link higher"}),o.a.createElement("div",{className:"menu-list",id:this.state.menulistId},o.a.createElement(c.Link,{to:"/",className:"header-link",onClick:this.closeMenu},"HOME"),o.a.createElement(c.Link,{to:"/my-account/0-1",className:"header-link",onClick:this.closeMenu},"MY ACCOUNT"),o.a.createElement(c.Link,{to:"/add-newrecipe",className:"header-link",onClick:this.closeMenu},"ADD RECIPE"),o.a.createElement(c.Link,{to:"/home-recipes/".concat(this.state.user,"-1"),className:"header-link",onClick:this.closeMenu},"RECIPES"),o.a.createElement(c.Link,{to:"/orders",className:"header-link",onClick:this.closeMenu},"ORDERS")))}},{key:"header",value:function(){var e=this;return this.state.token?o.a.createElement("div",{className:"menu"},o.a.createElement(c.Link,{to:"/",id:"logo",onClick:this.closeMenu},o.a.createElement("span",{className:"l"},"R"),o.a.createElement("span",null,"E"),o.a.createElement("span",null,"C"),o.a.createElement("span",null,"I"),o.a.createElement("span",null,"P"),o.a.createElement("span",null,"E"),o.a.createElement("span",{id:"dote"},".")),o.a.createElement("button",{onClick:function(t){return e.logout(t)},className:"logout link"},"LOGOUT"),o.a.createElement(c.Link,{to:"/signup",className:"signup link",onClick:function(t){return e.closeMenu(t)}},"SIGNUP")):o.a.createElement("div",{className:"menu"},o.a.createElement(c.Link,{to:"/",id:"logo",onClick:function(t){return e.closeMenu(t)}},o.a.createElement("span",{className:"l"},"R"),o.a.createElement("span",null,"E"),o.a.createElement("span",null,"C"),o.a.createElement("span",null,"I"),o.a.createElement("span",null,"P"),o.a.createElement("span",null,"E"),o.a.createElement("span",{id:"dote"},".")),o.a.createElement(c.Link,{to:"/login",className:"login link",onClick:function(t){return e.closeMenu(t)}},"LOGIN"),o.a.createElement(c.Link,{to:"/signup",className:"signup link",onClick:function(t){return e.closeMenu(t)}},"SIGNUP"))}},{key:"renderSocial",value:function(){var e={backgroundPosition:this.state.barPosition};return o.a.createElement("div",{className:"a-tags"},o.a.createElement("div",{id:"social-bar",style:e},o.a.createElement("a",{href:"#",className:"fab fa-facebook-f link"}),o.a.createElement("a",{href:"#",className:"fab fa-twitter link"}),o.a.createElement("a",{href:"#",className:"fab fa-instagram link"})))}},{key:"renderCart",value:function(){var e=this;if(null!==this.props.cart)return console.log(this.props.cart.items,"::"),this.props.cart.items.map((function(t,n){return o.a.createElement("div",{key:n,className:"cart-each-item"},o.a.createElement("div",{className:"cart-item"},o.a.createElement("div",{className:"cart-item-qty"},t.quantity),o.a.createElement("div",{className:"cart-item-name"},t.name),o.a.createElement("div",{className:"cart-item-price"},"$",t.unitPrice*t.quantity),o.a.createElement("button",{className:"cart-item-btn",onClick:function(n){return e.removeFromCart(n,t)}},"REMOVE")))}))}},{key:"removeFromCart",value:function(e,t){this.props.deletFromCart(t,this.state.user),console.log(this.props.history,"this.props.history")}},{key:"submitOrder",value:function(e){console.log(this.props.auth,this.props.cart.items,"lenth,this.props.cart.items.leng"),Object.keys(this.props.auth).length>0&&this.props.cart.items.length>0?(this.props.submitOrder(this.props.cart),this.props.history.push("/checkout")):this.props.cart.items.leng<1&&Object.keys(this.props.auth).lenth>0?this.setState({message:"there is no item in your cart"}):(this.props.cart.items.leng>0&&Object.keys(this.props.auth).lenth,this.setState({message:"You need to log in before checkout your cart"}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"container"},Object(s.renderRoutes)(this.props.route.routes),this.header(),this.renderSocial(),this.side(),o.a.createElement("div",{className:"cart-page",id:this.state.cart},o.a.createElement("div",{className:"cart-title"},"CART"),o.a.createElement("div",{className:"cart-title-bar"},o.a.createElement("span",{className:"cart-title-qty"},"QTY"),o.a.createElement("span",{className:"cart-title-name"},"RECIPE NAME"),o.a.createElement("span",{className:"cart-title-price"}," PRICE"),o.a.createElement("span",{className:"cart-title-empty"}," ")),o.a.createElement("br",null),o.a.createElement("div",{className:"cart-slice"},this.renderCart()),o.a.createElement("br",null),o.a.createElement("div",{className:"cart-buttom-bar"},o.a.createElement("div",{className:"cart-title-total"},"TOTAL: $",this.props.cart.total)),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(t){return e.submitOrder(t)},className:"checkout-button"},"CHECKOUT"),o.a.createElement("div",{className:"cart-message"},this.state.message)),o.a.createElement("div",{className:"white-bottom"}))}}])&&T(n.prototype,r),a&&T(n,a),u}(r.Component);var z=Object(c.withRouter)({component:Object(a.connect)((function(e){return console.log(e,"mapStateToProps----\x3estate.app cart"),{token:e.auth.token,userid:e.auth.user,cart:e.cart,auth:e.auth,openCart:e.openCart}}),{loginOutAccount:i.C,fetchCartItems:i.x,deletFromCart:i.u,ownerCartItems:i.E,submitOrder:i.K,closeCart:i.t})(G)});function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(s,e);var t,n,r,a,i=(t=s,function(){var e,n=X(t);if(V()){var r=X(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return $(this,e)});function s(){var e;K(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Q(Y(e=i.call.apply(i,[this].concat(n))),"state",{page:1,pageActive:"1"}),e}return n=s,(r=[{key:"componentDidMount",value:function(){var e=this;this.setState({user:localStorage.getItem("user"),token:localStorage.getItem("token")}),console.log("componentDidMount of recipepage",this.props),console.log("componentDidMount of recipepage,params",localStorage.getItem("user"),this.props.match.params._id.split("-")[1]),this.setState({pageActive:this.props.match.params._id.split("-")[1]}),this.props.fetchRecipes(this.props.match.params._id),p()("http://localhost:3000").on("recipes",(function(t){"create"===t.action?e.props.fetchRecipes(e.props.match.params._id):"edit"===t.action&&(console.log("aaaaaaaaaaaa"),e.props.fetchRecipes(e.props.match.params._id))}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;console.log("detail update",e.location.pathname,this.props.location.pathname),e.match.params._id!==this.props.match.params._id&&(this.setState({pageActive:this.props.match.params._id.split("-")[1]}),this.props.fetchRecipes(this.props.match.params._id)),p()("http://localhost:3000").on("recipes",(function(e){"create"===e.action&&n.props.fetchRecipes(n.props.match.params._id)}))}},{key:"addToCart",value:function(e,t){this.props.addToCart(t),this.props.history.push("/cart")}},{key:"renderRecipes",value:function(){if(console.log(this.props,"this.state.page"),this.props.pageRecipes)return this.props.pageRecipes.map((function(e,t){return console.log(e,"recipe page recipe"),o.a.createElement("div",{key:t,className:"account-recipe-page"},o.a.createElement(c.Link,{to:"/recipes/".concat(e._id),className:"account-recipe-link"},o.a.createElement("img",{src:"/".concat(e.picUrl),className:"image"}),o.a.createElement("div",{className:"image-name"},e.name)))}))}},{key:"head",value:function(){return o.a.createElement(u.Helmet,null,o.a.createElement("title",null,"recipes"),o.a.createElement("meta",{property:"og:title",content:"recipes"}))}},{key:"paging",value:function(){var e=[];if(this.props.recipes){for(var t=1;t<this.props.recipes.length/10+1;t++)console.log(this.state.pageActive,"`/home-recipes/${this.state.user}-${i}`"),"".concat(t)===this.state.pageActive?e.push(o.a.createElement(c.Link,{to:"/home-recipes/".concat(this.state.user,"-").concat(t),className:"pagination-link",style:{fontWeight:"500",color:"#26262E",background:"white"}},t)):e.push(o.a.createElement(c.Link,{to:"/home-recipes/".concat(this.state.user,"-").concat(t),className:"pagination-link"},t));return o.a.createElement("section",{className:"pagination"},e)}}},{key:"renderMain",value:function(){return o.a.createElement("div",{className:"account-explenation"},o.a.createElement("p",{className:"account-description"},"explor all the recipes has been posted"),o.a.createElement("div",{className:"account-connection"}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"my-account"},this.renderMain(),o.a.createElement("div",{className:"account-first"},o.a.createElement("div",{className:"account-title"},"RECIPES")),o.a.createElement("div",{className:"account-second"},o.a.createElement("div",{className:"account-items"},this.renderRecipes()),this.paging()))}}])&&W(n.prototype,r),a&&W(n,a),s}(r.Component);var ee=Object(c.withRouter)({loadedData:function(e,t,n,r,o){return console.log(e,t,o,"loadingggggggg loadedData RecipePage"),e.dispatch(Object(i.B)(t))},component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate.recipes",e.recipes),{recipes:e.recipes.data,pageRecipes:e.recipes.pagedata,auth:e.auth}}),{fetchRecipes:i.B,addToCart:i.r})(Z)});function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le={weekday:"long",year:"numeric",month:"long",day:"numeric",newComment:""},pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=ce(t);if(ie()){var r=ce(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return oe(this,e)});function c(){var e;ne(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ue(ae(e=i.call.apply(i,[this].concat(n))),"state",{user:""}),ue(ae(e),"createRecipe",(function(t){console.log(event.target.value,"???"),e.setState({newComment:event.target.value})})),ue(ae(e),"submitComment",(function(t){t.preventDefault(),console.log(e.state.newComment,"e.target.value"),e.props.addComment(e.state.newComment,e.props.detail._id,e.state.user),e.setState({newComment:""})})),ue(ae(e),"review",(function(){if(e.state.user)return o.a.createElement("form",{onSubmit:e.submitComment},o.a.createElement("textarea",{className:"text-area",value:e.state.newComment,onChange:function(t){return e.createRecipe(t)}}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{type:"submit"},"COMMENT"))})),ue(ae(e),"fetchComments",(function(){if(e.props.detail)return e.props.detail.comments.map((function(e,t){return o.a.createElement("div",{className:"each-comment"},o.a.createElement("div",{className:"comment"},o.a.createElement("span",{className:"commenter"},"*",e.commenter,"->"),o.a.createElement("span",{className:"note"},e.comment)),o.a.createElement("br",null),o.a.createElement("br",null))}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){var e=this;console.log(localStorage.getItem("cart"),"componentDidMount of detail",this.props),this.setState({user:localStorage.getItem("user")}),this.props.fetchRecipeDetail(this.props.match.params._id),p()("http://localhost:3000").on("recipes",(function(t){"edit"===t.action&&e.props.fetchRecipeDetail(e.props.match.params._id)}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;p()("http://localhost:3000").on("recipes",(function(e){"edit"===e.action&&n.props.fetchRecipeDetail(n.props.match.params._id)}))}},{key:"renderStars",value:function(){var e=[];if(null!==this.props.detail){var t,n,r=this.props.detail.stars%1,a=this.props.detail.stars/1;t=5-(n=r>0?1:0)+a,console.log(t,"emptyyyyyyyyyyyyy");for(var i=0;i<5;i++)i<a?e.push(o.a.createElement("i",{className:"fas fa-star"})):n?e.push(o.a.createElement("i",{className:"fas fa-star-half-alt"})):e.push(o.a.createElement("i",{className:"far fa-star"}))}return o.a.createElement("section",{className:"page-staring"},e)}},{key:"fetchProp",value:function(){if(null!==this.props.detail)return console.log(this.props.detail._id,"finally"),o.a.createElement("div",{className:"detail-page-container"},o.a.createElement("img",{src:"/".concat(this.props.detail.picUrl),className:"detail-page-pic"}),o.a.createElement("div",{className:"detail-page-slice"},o.a.createElement("div",{className:"page-stars"},this.renderStars()),o.a.createElement("div",{className:"page-name"},this.props.detail.name),o.a.createElement("div",{className:"page-author"},"author:",this.props.detail.author),o.a.createElement("div",{className:"page-category"},"Category:",this.props.detail.category),o.a.createElement("div",{className:"page-date"},new Date(this.props.detail.createdAt).toLocaleDateString("en-US",le)),o.a.createElement("p",{className:"page-detail"},this.props.detail.description),o.a.createElement("div",{className:"detail-page-price"},"$ ",this.props.detail.price),o.a.createElement("br",null),this.addButtons(),o.a.createElement("br",null),this.renderCommentArea()))}},{key:"giveStar",value:function(e){console.log(e.target.className)}},{key:"renderCommentArea",value:function(){return o.a.createElement("div",{className:"comment-area"},this.review(),o.a.createElement("br",null),o.a.createElement("div",{className:"comments"},this.fetchComments()))}},{key:"addToCart",value:function(e){var t=this;this.props.addToCart(this.props.detail),this.props.openCart(),setTimeout((function(){t.props.closeCart()}),4e3)}},{key:"deleteRecipe",value:function(e){e.preventDefault(),this.props.deleteRecipe(this.props.detail),this.props.history.push("/recipes")}},{key:"addButtons",value:function(){var e=this;if(console.log(this.props.auth,"this.props.detail !== null && this.props.auth"),this.state.user)return o.a.createElement("button",{onClick:function(t){return e.addToCart(t)},className:"detail-button"},"ADD")}},{key:"render",value:function(){return o.a.createElement("div",{className:"detail-page"},this.fetchProp(),o.a.createElement("br",null))}}])&&re(n.prototype,r),a&&re(n,a),c}(r.Component),fe=Object(c.withRouter)({loadedData:function(e,t){return console.log(e,t,"loadingggggggg loadedData Detail"),e.dispatch(Object(i.A)(t))},component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate.detail",e),{detail:e.detail,auth:e.auth,owner:e.owner}}),{fetchRecipeDetail:i.A,addToCart:i.r,openCart:i.D,closeCart:i.t,addComment:i.q})(pe)});function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?ge(e):t}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=ve(t);if(be()){var r=ve(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ye(this,e)});function c(){var e;me(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(ge(e=i.call.apply(i,[this].concat(n))),"state",{message:""}),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of orders",this.props),this.props.history.push("/home-recipes/".concat(localStorage.getItem("user"))),Object.keys(this.props.auth).length<1&&this.setState({message:"session has been expired, please login again"})}},{key:"renderCart",value:function(){return console.log(this.props.orders.length,"this.props.orders.length"),this.props.orders.length>0?this.props.orders.map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("br",null),o.a.createElement("div",null,"ORDER# : ",e._id),o.a.createElement("div",null,"total:",e.total),o.a.createElement("a",{href:"/order/".concat(e._id)},"INVOICE"))})):o.a.createElement("div",null,"no orders yet")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"ORDERS"),this.renderCart(),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&he(n.prototype,r),a&&he(n,a),c}(r.Component),Re={component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate.orders",e),{orders:e.orders,auth:e.auth}}),{fetchOrders:i.y})(Oe)};function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?xe(e):t}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(s,e);var t,n,r,a,i=(t=s,function(){var e,n=je(t);if(Ne()){var r=je(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return _e(this,e)});function s(){var e;ke(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ie(xe(e=i.call.apply(i,[this].concat(n))),"state",{authentication:{},message:""}),Ie(xe(e),"createRecipe",(function(t){var n=Object.assign({},e.state.authentication);console.log(n,"authentication"),n[t.target.id]=t.target.value,e.setState({authentication:n})})),Ie(xe(e),"login",(function(t){t.preventDefault(),console.log(e.state.authentication,"this.state.authentication"),e.props.authenticateAccount(e.state.authentication).then((function(t){t.payload.msg?e.setState({message:t.payload.msg.msg}):e.props.history.push("/")}))})),e}return n=s,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of login",this.props)}},{key:"componentDidUpdate",value:function(e,t){console.log("detail update",e,this.props,this.props.auth.msg)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"login-page"},o.a.createElement("form",{onSubmit:this.login,className:"login-form"},o.a.createElement("div",{className:"login-title"},"LOGIN"),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"email",type:"email",placeholder:"Email"}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"password",type:"text",placeholder:"Password"}),o.a.createElement(c.Link,{to:"/reset-password-request",className:"change-password"},"Forgot your password?"),o.a.createElement("button",{type:"submit",className:"main-button"},"LOGIN"),o.a.createElement("div",{className:"line"},o.a.createElement("div",{className:"line-l"}),"or",o.a.createElement("div",{className:"line-r"})),o.a.createElement(c.Link,{to:"/signup",className:"header-link button"},"SIGNUP")),o.a.createElement("div",{id:"message"}," ",this.state.message))}}])&&Ce(n.prototype,r),a&&Ce(n,a),s}(r.Component);var Te=Object(c.withRouter)({component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate.login",e),{auth:e.auth}}),{authenticateAccount:i.s})(De)});function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?Le(e):t}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(s,e);var t,n,r,a,i=(t=s,function(){var e,n=Be(t);if(Fe()){var r=Be(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Me(this,e)});function s(){var e;qe(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ze(Le(e=i.call.apply(i,[this].concat(n))),"state",{newUser:{},message:[]}),ze(Le(e),"createRecipe",(function(t){console.log(t.target.value,"e.target.value");var n=Object.assign({},e.state.newUser);n[t.target.id]=t.target.value,e.setState({newUser:n})})),ze(Le(e),"signup",(function(t){t.preventDefault(),console.log(e.state.newUser,"this.state.newUser.password===this.state.newUser.confirmPassword"),e.props.signupNewUser(e.state.newUser).then((function(t){console.log(t,"signup-------\x3e"),"1"===t.payload.newUser?e.props.history.push("/login"):e.setState({message:t.payload.msg})}))})),e}return n=s,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of login",this.props)}},{key:"renderMessage",value:function(){var e=[];return this.state.message.length>0&&this.state.message.map((function(t){e.push(o.a.createElement("div",{className:"each-message"},t.msg))})),o.a.createElement("p",null,e)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"login-page"},o.a.createElement("form",{onSubmit:this.signup,noValidate:!0,className:"login-form"},o.a.createElement("div",{className:"login-title"},"SIGNUP"),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"name",type:"text",placeholder:"Name",required:!0}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"email",type:"email",placeholder:"Email",required:!0}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"password",type:"text",placeholder:"Password",required:!0}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"confirmPassword",type:"text",placeholder:"Confirm Password",required:!0}),o.a.createElement(c.Link,{to:"/login",className:"change-password"},"Already have an account?"),o.a.createElement("button",{type:"submit",className:"main-button"},"SIGNUP")),o.a.createElement("div",{id:"message"},this.renderMessage()))}}])&&Ue(n.prototype,r),a&&Ue(n,a),s}(r.Component);var Ke=Object(c.withRouter)({component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate. Signup",e),{newUser:e.newUser}}),{signupNewUser:i.J})(He)});function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?Xe(e):t}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Je(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Qe(t);if(Je()){var r=Qe(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ve(this,e)});function c(){var e;$e(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return et(Xe(e=i.call.apply(i,[this].concat(n))),"state",{newRecipe:{category:"cooking"},message:"",file:{},category:"COOKING"}),et(Xe(e),"createRecipe",(function(t){console.log(event.target.value,"createRecipe piccccccc",e.state.newRecipe);var n=Object.assign({},e.state.newRecipe),r=Object.assign({},e.state.file);t.target.files?(console.log(event.target.files,"event.target.files[0]"),r[t.target.id]=event.target.files[0].name,n[t.target.id]=event.target.files[0]):(n[t.target.id]=t.target.value,e.setState({category:event.target.value})),e.setState({newRecipe:n,file:r})})),et(Xe(e),"submitNewRecipe",(function(t){t.preventDefault(),Object.keys(e.props.auth).length<1&&e.setState({message:"session has been expired, please login again"});var n=new FormData;Object.keys(e.state.newRecipe).map((function(t){console.log(t,e.state.newRecipe[t],"this.state.newRecipe[key]"),n.append(t,e.state.newRecipe[t])})),e.props.postNewRecipe(n).then((function(t){console.log(t.data,"res.data"),t.data.msg?"jwt expired"===t.data.msg?e.setState({message:"session has been expired, please login again"}):e.setState({message:t.data.msg}):e.props.history.push("/myrecipes/".concat(t.data))})).catch((function(t){return e.setState({message:res.data})}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of addrecipe",this.props),Object.keys(this.props.auth).length<1&&this.setState({message:"please login again to be able to post your recipe"})}},{key:"checkCategory",value:function(){if(!this.state.newRecipe.category){var e=Object.assign({},this.state.newRecipe);e.category="cooking",this.setState({newRecipe:e})}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"add-recipe-page"},o.a.createElement("form",{onSubmit:this.submitNewRecipe,encType:"multipart/form-data",className:"add-form"},o.a.createElement("div",{className:"add-title"},"ADD RECIPE"),o.a.createElement("div",{class:"file-upload"},o.a.createElement("div",{className:"upload-imag"},o.a.createElement("div",{className:"upload-button fa fa-chevron-up"}),o.a.createElement("div",{className:"upload-name "},this.state.file.picUrl)),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"picUrl",name:"picUrl",type:"file",placeholder:"image URL"})),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},className:"add-input",id:"name",type:"text",placeholder:"name"}),o.a.createElement("select",{value:this.state.category,onChange:function(t){return e.createRecipe(t)},id:"category"},o.a.createElement("option",{value:"cooking"},"COOKING"),o.a.createElement("option",{value:"baking"},"BAKING"),o.a.createElement("option",{value:"deinking"},"DRINKING"),o.a.createElement("option",{value:"icecreaming"},"ICE CREAMING")),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"price",type:"text",placeholder:"price"}),o.a.createElement("textarea",{onChange:function(t){return e.createRecipe(t)},id:"description",type:"text",placeholder:"description",rows:"10"}),o.a.createElement("button",{type:"submit",className:"edit-button"},"ADD RECIPE")),o.a.createElement("div",{id:"message"}," ",this.state.message))}}])&&Ye(n.prototype,r),a&&Ye(n,a),c}(r.Component);var nt=Object(c.withRouter)({component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate.detail",e),{auth:e.auth}}),{postNewRecipe:i.H,loginOutAccount:i.C})(tt)});function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?ct(e):t}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=ut(t);if(st()){var r=ut(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return it(this,e)});function c(){var e;ot(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pt(ct(e=i.call.apply(i,[this].concat(n))),"state",{updatedRecipe:{},message:""}),pt(ct(e),"createRecipe",(function(t){var n=Object.assign({},e.state.updatedRecipe);t.target.files?n[t.target.id]=event.target.files[0]:n[t.target.id]=t.target.value,e.setState({updatedRecipe:n})})),pt(ct(e),"submitUpdatedRecipe",(function(t){t.preventDefault(),Object.keys(e.props.auth).length<1&&e.setState({message:"session has been expired, please login again"}),console.log("updating starts");var n=new FormData;Object.keys(e.state.updatedRecipe).map((function(t){console.log(t,e.state.updatedRecipe[t],"this.state.updatedRecipe[key]"),n.append(t,e.state.updatedRecipe[t])})),console.log(n,"updatedata"),e.props.editRecipe(n,e.props.detail._id).then((function(t){t.data.msg?e.setState({message:t.data.msg}):e.props.history.push("/myrecipes/".concat(e.props.detail._id)),console.log(t,"resolved")}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of editting",this.props),Object.keys(this.props.auth)<1&&this.props.history.push("/login"),this.props.fetchRecipeDetail(this.props.match.params._id);var e=Object.assign({},this.state.updatedRecipe);this.props.detail&&(e.name=this.props.detail.name,e.price=this.props.detail.price,e.picUrl=this.props.detail.picUrl,e.description=this.props.detail.description,e._id=this.props.detail._id,this.setState({updatedRecipe:e}))}},{key:"componentDidUpdate",value:function(e,t){console.log("detail update",e,this.props),Object.keys(this.props.auth)<1&&this.props.history.push("/login")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"edit-page"},o.a.createElement("form",{onSubmit:this.submitUpdatedRecipe,encType:"multipart/form-data",className:"update-form"},o.a.createElement("div",{className:"edit-title"},"EDIT"),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},className:"add-input",id:"name",type:"text",defaultValue:this.props.detail.name||""}),o.a.createElement("br",null),o.a.createElement("div",{class:"file-upload"},o.a.createElement("div",{className:"upload-imag"},o.a.createElement("div",{className:"upload-button fa fa-chevron-up"}),o.a.createElement("div",{className:"upload-name "},o.a.createElement("div",{className:"scroll-name"},this.props.detail.picUrl))),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"picUrl",name:"picUrl",type:"file",placeholder:"image URL"})),o.a.createElement("br",null),o.a.createElement("textarea",{onChange:function(t){return e.createRecipe(t)},id:"description",className:"edit-description",name:"description",type:"text",rows:"10",defaultValue:this.props.detail.description}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"price",name:"price",type:"text",defaultValue:this.props.detail.price||0}),o.a.createElement("br",null),o.a.createElement("select",{value:this.state.category,onChange:function(t){return e.createRecipe(t)},id:"category"},o.a.createElement("option",{value:"cooking"},"COOKING"),o.a.createElement("option",{value:"baking"},"BAKING"),o.a.createElement("option",{value:"deinking"},"DRINKING"),o.a.createElement("option",{value:"icecreaming"},"ICE CREAMING")),o.a.createElement("button",{type:"submit",className:"edit-button"},"SUBMIT CHANGES")),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&at(n.prototype,r),a&&at(n,a),c}(r.Component),dt=Object(c.withRouter)({loadedData:function(e,t){return console.log(e,t,"loadingggggggg loadedData Detail"),e.dispatch(Object(i.A)(t))},component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3eupdatestate.detail",e),{detail:e.detail,auth:e.auth}}),{editRecipe:i.w,fetchRecipeDetail:i.A})(ft)});function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?bt(e):t}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(s,e);var t,n,r,a,i=(t=s,function(){var e,n=wt(t);if(vt()){var r=wt(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return gt(this,e)});function s(){var e;ht(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ot(bt(e=i.call.apply(i,[this].concat(n))),"state",Ot({page:1,user:"",message:"",pageActive:"1",authentication:{}},"message","")),Ot(bt(e),"createRecipe",(function(t){var n=Object.assign({},e.state.authentication);console.log(n,"authentication"),n[t.target.id]=t.target.value,e.setState({authentication:n})})),Ot(bt(e),"login",(function(t){console.log("clickedddddd"),t.preventDefault(),console.log(e.state.authentication,"this.state.authentication"),e.props.authenticateAccount(e.state.authentication).then((function(t){t.payload.msg?e.setState({message:t.payload.msg.msg}):e.props.history.push("/my-account/".concat(e.state.user))}))})),e}return n=s,(r=[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.auth,localStorage.getItem("user"),"componentDidMount of myaccount",this.props.location.pathname.split("t/")[1]),this.props.auth.msg&&this.setState({message:"session has been expired, please login again"}),localStorage.getItem("user"),p()("http://localhost:3000").on("recipes",(function(t){"edit"===t.action&&(console.log("aaaaaaaaaaaa"),e.props.fetchOwnerRecipes(e.props.location.pathname.split("t/")[1]))})),this.setState({user:localStorage.getItem("user")}),this.setState({pageActive:this.props.location.pathname.split("t/")[1].split("-")[1]}),this.props.fetchOwnerRecipes(this.props.location.pathname.split("t/")[1])}},{key:"componentDidUpdate",value:function(e,t){var n=this;console.log("detail update-------------------------------",e.location.pathname,"detail update-------------------------------",this.props.location.pathname),e.auth.token!==this.props.auth.token&&this.props.fetchOwnerRecipes(this.props.location.pathname.split("t/")[1]),e.location.pathname!==this.props.location.pathname&&(this.props.fetchOwnerRecipes(this.props.location.pathname.split("t/")[1]),this.setState({pageActive:this.props.location.pathname.split("t/")[1].split("-")[1]})),p()("http://localhost:3000").on("recipes",(function(e){"edit"===e.action&&(console.log("aaaaaaaaaaaa"),n.props.fetchOwnerRecipes(n.props.location.pathname.split("t/")[1]))}))}},{key:"componentDidUpdate",value:function(e,t){console.log("detail update",e,this.props),Object.keys(this.props.auth)<1&&this.props.history.push("/login")}},{key:"renderRecipes",value:function(){if(console.log(this.state.user,"token"),this.state.user&&this.props.pageRecipes)return this.props.pageRecipes.map((function(e,t){return o.a.createElement("div",{key:t,className:"account-recipe-page"},o.a.createElement(c.Link,{to:"/myrecipes/".concat(e._id),className:"account-recipe-link"},o.a.createElement("img",{src:"/".concat(e.picUrl),className:"image"}),o.a.createElement("div",{className:"image-name"},e.name)))}))}},{key:"paging",value:function(){var e=[];if(this.props.recipes){for(var t=1;t<this.props.recipes.length/10+1;t++)console.log(this.state.pageActive,"`/home-recipes/${this.state.user}-${i}`"),"".concat(t)===this.state.pageActive?e.push(o.a.createElement(c.Link,{to:"/my-account/".concat(this.state.user,"-").concat(t),className:"pagination-link",style:{fontWeight:"700",color:"#26262E",background:"white"}},t)):e.push(o.a.createElement(c.Link,{to:"/my-account/".concat(this.state.user,"-").concat(t),className:"pagination-link"},t));return o.a.createElement("section",{className:"pagination"},e)}}},{key:"renderMain",value:function(){return this.state.user?o.a.createElement("div",{className:"account-explenation"},o.a.createElement("p",{className:"account-description"},"List of all products you have made"),o.a.createElement("div",{className:"account-connection"})):o.a.createElement("div",{className:"account-explenation"},o.a.createElement("p",{className:"account-description"},"Please login first to be able see your account"),o.a.createElement(c.Link,{to:"/login",className:"account-login-link",onClick:function(e){return console.log(e.target)}},"LOGIN"))}},{key:"render",value:function(){return o.a.createElement("div",{className:"my-account"},this.renderMain(),o.a.createElement("div",{className:"account-first"},o.a.createElement("div",{className:"account-title"},"MY ACCOUNT")),o.a.createElement("div",{className:"account-second"},o.a.createElement("div",{className:"account-items"},this.renderRecipes()),this.paging()))}}])&&yt(n.prototype,r),a&&yt(n,a),s}(r.Component),St=Object(c.withRouter)({loadedData:function(e,t,n,r,o){return console.log(t,o,"loadingggggggg loadedData MyAccount",e.getState()),e.dispatch(Object(i.F)(t))},component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate.detail myaccount",e),{auth:e.auth,recipes:e.ownerRecipes.ownerRecipes,pageRecipes:e.ownerRecipes.ownerRecipespage}}),{fetchOwnerRecipes:i.z,ownerRecipes:i.F,authenticateAccount:i.s})(Rt)});function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){At(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?Pt(e):t}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function It(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Dt(t);if(It()){var r=Dt(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return jt(this,e)});function c(){var e;xt(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return At(Pt(e=i.call.apply(i,[this].concat(n))),"state",{updatedPassword:{},message:""}),At(Pt(e),"createRecipe",(function(t){console.log(t.target.value,"e.target.value");var n=Object.assign({},e.state.updatedPassword);n[t.target.id]=t.target.value,e.setState({updatedPassword:n})})),At(Pt(e),"updatePassword",(function(t){t.preventDefault(),console.log(e.state.updatedPassword,"this.state.updatedPassword"),e.props.postNewPassword(_t({},e.state.updatedPassword,{},e.props.match.params)).then((function(t){e.props.history.push("/login")}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of ResetPassword",this.props),console.log("componentDidMount of ResetPassword",this.props.match.params.token)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"login-page"},o.a.createElement("form",{onSubmit:this.updatePassword,className:"login-form"},o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"password",type:"text",placeholder:"Password"}),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"passwordConfirmation",type:"text",placeholder:"Password Confirmation"}),o.a.createElement("br",null),o.a.createElement("button",{type:"submit",className:"main-button"},"RESET PASSWORD")),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&Nt(n.prototype,r),a&&Nt(n,a),c}(r.Component);var Ut=Object(c.withRouter)({component:Object(a.connect)((function(e){console.log("mapStateToProps----\x3estate. ResetPassword",e)}),{postNewPassword:i.G})(qt)});function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?Gt(e):t}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=Ht(t);if(zt()){var r=Ht(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Bt(this,e)});function c(){var e;Lt(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Wt(Gt(e=i.call.apply(i,[this].concat(n))),"state",{email:{},message:""}),Wt(Gt(e),"createRecipe",(function(t){console.log(t.target.value,"e.target.value");var n=Object.assign({},e.state.email);n[t.target.id]=t.target.value,e.setState({email:n})})),Wt(Gt(e),"request",(function(t){t.preventDefault(),console.log(e.state.email,"this.state.newUser.password===this.state.newUser.confirmPassword"),e.props.resetPasswordRequest(e.state.email).then((function(t){1===e.props.exist?e.setState({message:"submitted!"}):e.setState({message:"email dosnt exist"})}))})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of resetPassword",this.props)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"login-page"},o.a.createElement("form",{onSubmit:this.request,className:"login-form"},o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{className:"login-title"},"ACCOUNT RECOVERY"),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"email",type:"email",placeholder:"email",required:!0}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{type:"submit",className:"main-button"},"RESET PASSWORD"),o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement("div",{id:"message"},"message: ",this.state.message))}}])&&Ft(n.prototype,r),a&&Ft(n,a),c}(r.Component);var Yt=Object(c.withRouter)({component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate. ResetPasswordReq",e),{exist:e.exist}}),{resetPasswordRequest:i.I})($t)});function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e,t){return!t||"object"!==Vt(t)&&"function"!=typeof t?Zt(e):t}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function en(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var on={weekday:"long",year:"numeric",month:"long",day:"numeric"},an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(s,e);var t,n,r,a,i=(t=s,function(){var e,n=tn(t);if(en()){var r=tn(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Qt(this,e)});function s(){var e;Xt(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return rn(Zt(e=i.call.apply(i,[this].concat(n))),"state",{Date:"",user:"",message:""}),rn(Zt(e),"fetchComments",(function(){return o.a.createElement("div",{className:"comment-slice"})})),e}return n=s,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of detail",this.props),Object.keys(this.props.auth)<1&&this.props.history.push("/login"),this.props.fetchRecipeDetail(this.props.match.params._id),this.props.detail&&this.setState({date:new Date(this.props.detail.createdAt).toLocaleDateString("en-US",on),user:localStorage.getItem("user")})}},{key:"componentDidUpdate",value:function(e,t){console.log("detail update",e,this.props),Object.keys(this.props.auth)<1&&this.props.history.push("/login")}},{key:"renderStars",value:function(){var e=[];if(null!==this.props.detail){var t,n=this.props.detail.stars%1,r=this.props.detail.stars/1;t=n>0?1:0;for(var a=0;a<5;a++)a<r?e.push(o.a.createElement("i",{className:"fas fa-star"})):t?e.push(o.a.createElement("i",{className:"fas fa-star-half-alt"})):e.push(o.a.createElement("i",{className:"far fa-star"}))}return o.a.createElement("section",{className:"staring"},e)}},{key:"fetchProp",value:function(){if(null!==this.props.detail)return console.log(this.props.detail._id,"finally"),o.a.createElement("div",{className:"detail-container"},o.a.createElement("img",{src:"/".concat(this.props.detail.picUrl),className:"account-detail-img"}),o.a.createElement("div",{className:"account-detail-slice"},o.a.createElement("div",{className:"detail-stars"},this.renderStars()),o.a.createElement("div",{className:"detail-name"},this.props.detail.name),o.a.createElement("div",{className:"detail-author"},"author:",this.props.detail.author),o.a.createElement("div",{className:"detail-category"},"Category:",this.props.detail.category),o.a.createElement("div",{className:"detail-date"},new Date(this.props.detail.createdAt).toLocaleDateString("en-US",on)),o.a.createElement("p",{className:"detail-description"},this.props.detail.description),o.a.createElement("div",{className:"detail-price"},"$",this.props.detail.price),this.addButtons(),this.fetchComments()))}},{key:"addToCart",value:function(e){this.props.addToCart(this.props.detail),this.props.history.push("/cart")}},{key:"deleteRecipe",value:function(e){console.log(this.state.user,"this.state.user"),e.preventDefault(),this.props.deleteRecipe(this.props.detail),this.props.history.push("/my-account/".concat(this.state.user,"-1"))}},{key:"addButtons",value:function(){var e=this;if(null!==this.props.detail&&Object.keys(this.props.auth)>0)return o.a.createElement("div",{className:"account-buttons"},o.a.createElement("button",null,o.a.createElement(c.Link,{to:"/edit-recipe/".concat(this.props.detail._id),className:"account-link"},"EDIT")),o.a.createElement("button",{onClick:function(t){return e.deleteRecipe(t)}},"DELETE"))}},{key:"render",value:function(){return o.a.createElement("div",{className:"account-detail"},this.fetchProp(),o.a.createElement("br",null))}}])&&Jt(n.prototype,r),a&&Jt(n,a),s}(r.Component),cn=Object(c.withRouter)({component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate.mdetail",e),{detail:e.detail,auth:e.auth}}),{fetchRecipeDetail:i.A,deleteRecipe:i.v,addToCart:i.r})(an)});function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e,t){return!t||"object"!==sn(t)&&"function"!=typeof t?fn(e):t}function fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(c,e);var t,n,r,a,i=(t=c,function(){var e,n=mn(t);if(dn()){var r=mn(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return pn(this,e)});function c(){var e;un(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yn(fn(e=i.call.apply(i,[this].concat(n))),"state",{payment:{},message:""}),yn(fn(e),"createRecipe",(function(t){console.log(e.state.payment,"this.state.payment");var n=Object.assign({},e.state.payment);n[t.target.id]=t.target.value,e.setState({payment:n})})),e}return n=c,(r=[{key:"componentDidMount",value:function(){console.log("componentDidMount of cart",this.props),Object.keys(this.props.auth).length<1&&this.props.history.push("/login"),this.props.fetchCartItems(),this.setState({total:this.props.cart.total})}},{key:"componentDidUpdate",value:function(e,t){console.log("cart update",e.cart.total,this.props.cart.total),e.cart.total!==this.props.cart.total&&this.props.fetchCartItems()}},{key:"renderCart",value:function(){var e=this;if(null!==this.props.cart)return console.log(this.props.cart.items,"::"),this.props.cart.items.map((function(t,n){return o.a.createElement("div",{key:n,className:"checkout-each-item"},o.a.createElement("div",{className:"checkout-item"},o.a.createElement("div",{className:"checkout-title-qty"},"quantity:",t.quantity),o.a.createElement("div",{className:"checkout-title-name"},t.name),o.a.createElement("div",{className:"checkout-title-price"},t.price),o.a.createElement("button",{onClick:function(n){return e.removeFromCart(n,t)}},"REMOVE")))}))}},{key:"paymentForm",value:function(){var e=this;return o.a.createElement("form",{className:"payment-form"},o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"name",type:"text",placeholder:"name"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{onChange:function(t){return e.createRecipe(t)},id:"creditCard",type:"text",placeholder:"Credit card number"}),o.a.createElement("br",null))}},{key:"submitOrder",value:function(e){this.setState({message:"We dont offer checkout yet"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"checkout-page"},o.a.createElement("div",{className:"checkout-title"},"CHECKOUT"),o.a.createElement("br",null),o.a.createElement("div",{className:"checkout-slice"},this.renderCart()),o.a.createElement("br",null),o.a.createElement("div",{className:"checkout-buttom-bar"},o.a.createElement("div",{className:"checkout-title-total"},"TOTAL: $",this.props.cart.total)),o.a.createElement("div",{className:"checkout-payment"},this.paymentForm()),o.a.createElement("button",{onClick:function(t){return e.submitOrder(t)},className:"order-button"},"PLACE ORDER"),o.a.createElement("div",{className:"cart-message"},this.state.message))}}])&&ln(n.prototype,r),a&&ln(n,a),c}(r.Component);var bn=Object(c.withRouter)({loadedData:function(e,t,n,r){console.log(e,t,n,r,"loadingggggggg loadedData checkout")},component:Object(a.connect)((function(e){return console.log("mapStateToProps----\x3estate.checkout",e),{cart:e.cart,auth:e.auth}}),{fetchCartItems:i.x,ownerCartItems:i.E,submitOrder:i.K})(gn)});function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){En(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function En(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=[wn({},z,{routes:[wn({},nt,{path:"/add-newrecipe"}),wn({},fe,{path:"/recipes/:_id",exact:!0}),wn({},cn,{path:"/myrecipes/:_id",exact:!0}),wn({},ee,{path:"/home-recipes/:_id",exact:!0}),wn({},dt,{path:"/edit-recipe/:_id",exact:!0}),wn({},bn,{path:"/checkout",exact:!0}),wn({},Re,{path:"/orders",exact:!0}),wn({},St,{path:"/my-account/:_id",exact:!0}),wn({},Te,{path:"/login",exact:!0}),wn({},Ke,{path:"/signup",exact:!0}),wn({},Yt,{path:"/reset-password-request",exact:!0}),wn({},Ut,{path:"/reset-password/:token",exact:!0}),wn({},w,{path:"/",exact:!0}),wn({},E)]})]},function(e,t){e.exports=require("depd")},function(e,t){e.exports=require("prop-types")},function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(13),i=a.Schema,c=new i({name:{type:String,required:!0},picUrl:{type:String},description:{type:String,required:!0},price:{type:Number,required:!0},date:{type:Number,required:!0},comments:[{commenter:{type:String,required:!0},comment:{type:String,required:!0}}],stars:{type:Number,required:!0},author:{type:String,required:!0},category:{type:String,required:!0},userId:{type:i.Types.ObjectId,ref:"User",required:!0}},{timestamps:!0});c.methods.addComment=function(e,t){console.log(e,t,"recipe schema ");var n=r(this.comments);return n.push({comment:e,commenter:t}),this.comments=n,this.save()},e.exports=a.model("Recipe",c)},function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(13),i=a.Schema,c=new i({name:{type:String,required:!0},email:{type:String,required:!0},password:{type:String,required:!0},posts:[{type:i.Types.ObjectId,ref:"Recipe"}],resetToken:String,resetTokenEXP:Date,cart:{items:[{recipeId:{type:i.Types.ObjectId,ref:"Recipe",required:!0},name:{type:i.Types.String,ref:"Recipe",required:!0},quantity:{type:Number,required:!0},unitPrice:{type:Number,required:!0}}],total:{type:i.Types.Number,required:!0}},orders:[{items:[{recipeId:{type:i.Types.ObjectId,ref:"Recipe",required:!0},name:{type:i.Types.String,ref:"Recipe",required:!0},quantity:{type:Number,required:!0},unitPrice:{type:Number,required:!0}}],total:{type:Number,required:!0}}]});c.methods.addToCart=function(e){console.log(e,"user schema ");var t=this.cart.items.findIndex((function(t){return t.recipeId.toString()===e._id.toString()})),n=1,o=this.cart.total+e.price,a=r(this.cart.items);t>=0?(n=this.cart.items[t].quantity+1,a[t].quantity=n):a.push({recipeId:e._id,name:e.name,quantity:n,unitPrice:e.price});var i={items:a,total:o};return this.cart=i,this.save()},c.methods.deleteFromCart=function(e){var t=this.cart.items.findIndex((function(t){return console.log(e,"-?_?_?_?_?_?",t,"-----------------"),t._id.toString()===e._id.toString()}));console.log(this.cart.items[t],"cartRecipeIndex",this.cart.total,">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>");var n=this.cart.total-this.cart.items[t].quantity*this.cart.items[t].unitPrice;return console.log(n,"total00000"),this.cart.total=n,this.cart.items.splice(t,1),this.save()},c.methods.addToOrder=function(){return console.log(this.cart,"user cart   schema "),currentOrder={item:this.cart.items,total:this.cart.total},console.log(currentOrder,"currentOrder"),this.orders.push(currentOrder),console.log(this.orders,"currentOrder"),this.cart={items:[],total:0},this.save()},c.methods.updateCart=function(e){console.log(e,"updatecartttttt",this.cart,"cartttttt");var t=this.cart.items.findIndex((function(t){return t.recipeId.toString()===e._id.toString()}));if(console.log(t,"cartRecipeIndex",this.cart.total,">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),-1!==t){var n=this.cart.total-this.cart.items[t].quantity*this.cart.items[t].unitPrice;console.log(n,"total00000"),this.cart.total=n,this.cart.items.splice(t,1)}return this.save()},c.methods.logout=function(){return this.isLoggedin=!1,this.save()},e.exports=a.model("User",c)},function(e,t,n){var r;e.exports={init:function(e){return r=n(59)(e)},getIO:function(){if(!r)throw new Error("Socket.io not initialized!");return r}}},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("express-validator")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("serialize-javascript")},function(e,t){e.exports=require("cookie-parser")},function(e,t,n){var r=n(7).Router(),o=n(55),a=n(25),i=n(28),c=i.check,s=i.body,u=(n(24),n(62));r.get("/home-data/:_id",o.getRecipes),r.get("/owner-alldata/:_id",o.getOwnerRecipes),r.get("/owner-data/:_id",o.getOwnerRecipesLoad),r.get("/data/:_id",o.getRecipe),r.post("/data",c("name").trim().isLength({min:2}),c("description").trim().isLength({min:2}),u,o.postRecipe),r.post("/data/:_id",u,o.postEditRecipe),r.post("/delete-data/:_id",u,o.postDeleteRecipe),r.get("/cart-items",u,o.getCart),r.get("/cart-items/:_id",o.ownerCart),r.post("/cart-items",u,o.postCart),r.post("/delete-from-cart",o.deleteFromCart),r.get("/submit-order",o.getSubmitOrder),r.get("/submit-order/:_id",o.getOwnerOrder),r.post("/submit-order",o.postSubmitOrder),r.get("/order/:orderId",o.getInvoice),r.post("/submit-comment",o.postSubmitComment),r.post("/auth-signup",c("email").isEmail().withMessage("Please add valid email").custom((function(e,t){var n=t.req;return console.log(e,"...",n.body.email),a.find({email:e}).then((function(e){if(console.log(e,"???"),e.length>0)return Promise.reject("Email exists already, please pick a different email")}))})).normalizeEmail(),s("password","Please choose a password with minimum 8 charachters which includes just text and numbers").isLength({min:8}).isAlphanumeric().trim(),s("confirmPassword").trim().custom((function(e,t){if(e!==t.req.body.password)throw new Error("passwords have to match");return!0})),o.postUser),r.post("/auth-login",c("email").isEmail().normalizeEmail(),s("password").isLength({min:8}).isAlphanumeric().trim(),o.postLogin),r.post("/password-request",o.postNewPasswordRequest),r.post("/post-new-password",o.postNewPassword),r.post("/auth-logout",o.postLogout),r.get("/auth-login",o.getAuth),r.get("/auth-login-page",o.getLogin),e.exports=r},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("connect-mongodb-session")},function(e,t,n){"use strict";var r=n(8),o=n(1);t.a=Object(r.combineReducers)({recipes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.g:return console.log(t.payload.data,"recipereducer----FFETCH_RECIPES----\x3eaction.payload.data"),t.payload;default:return e}},detail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.h:return console.log(t.payload.data,"detailreducer--------\x3eaction.payload.data"),t.payload.data;default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],total:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.d:return console.log(t.payload,"cartreducer--------\x3eaction.payload.data"),t.payload.cart?t.payload.cart:{items:[],total:0};default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.e:return console.log(t.payload.data,"ordersreducer--------\x3eaction.payload.data"),t.payload.orders;case o.l:return console.log(t.payload,"ordersreducer--------\x3eaction.payload.data"),t.payload.orders;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.j:return console.log(t.payload,"LOGIN_PAGE payload"),t.payload.login;case o.a:return console.log(t.payload,"AUTHENTICATE_ACCOUNT payload"),t.payload;case o.b:return console.log(t.payload,"CHECK_AUTH payload"),t.payload;case o.i:return console.log(t.payload,"LOGIN_OUT_ACCOUNT payload"),t.payload;default:return e}},newUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.p:return console.log(t.payload,"SIGNUP_NEW_USER payload"),t.payload.newUser||t.payload.msg;default:return e}},passwordOwner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.n:return console.log(t.payload,"passwordupdatereducer--------\x3eaction.payload.data"),t.payload.passwordOwner;default:return e}},exist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.o:return console.log(t.payload,"passwordreducer--------\x3eaction.payload.data"),t.payload.exist;default:return e}},ownerRecipes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.f:return console.log("ownerreducer--------\x3eaction.payload.data"),t.payload;case o.m:return console.log(t.payload,"recipereducer----action.payload.ownerRecipes----\x3eaction.payload.data"),t.payload;default:return e}},openCart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],total:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.c:return console.log(t.payload,"CLOSE_CART --------\x3eaction.payload.data"),t.payload;case o.k:return console.log(t.payload,"open_CART --------\x3eaction.payload.data"),t.payload;default:return e}}})},function(e,t,n){n(42),e.exports=n(43)},function(e,t){e.exports=require("@babel/polyfill")},function(e,t,n){"use strict";n.r(t),function(e){n(44);var t=n(7),r=n.n(t),o=n(29),a=n.n(o),i=n(19),c=n.n(i),s=n(0),u=n.n(s),l=n(30),p=n.n(l),f=n(31),d=n(2),m=n(32),h=n.n(m),y=n(33),g=n.n(y),b=n(8),v=n(34),w=n.n(v),E=n(35),O=n.n(E),R=n(3),S=n(6),k=n(36),C=n.n(k),_=n(40),x=n(13),N=n.n(x),j=n(21),P=n(37),I=n.n(P),D=n(38),T=n.n(D),A=n(39),q=n.n(A),U=n(20),M=n.n(U),L=n(15),F=n.n(L),B=n(16),G=n.n(B),z=(n(63),r()());z.use(C()());var H="mongodb+srv://".concat(process.env.MONGO_USER,":").concat(process.env.MONGO_PASSWORD,"@cluster0-m4fqf.mongodb.net/").concat(process.env.MONGO_DEFAULT_DATABASE,"?retryWrites=true"),K=(q()(T.a),M.a.diskStorage({destination:function(e,t,n){n(null,"picUrl")},filename:function(e,t,n){n(null,(new Date).toISOString()+"-"+t.originalname)}})),W=F.a.createWriteStream(G.a.join("src/","access.log"),{flags:"a"});console.log(G.a.join(e,"access.log"),"???"),z.use(p()()),z.use(r.a.static("public")),z.use("/picUrl",r.a.static("picUrl")),z.use(c.a.json()),z.use(M()({storage:K,fileFilter:function(e,t,n){"image/png"===t.mimetype||"image/jpg"===t.mimetype||"image/jpeg"===t.mimetype?n(null,!0):n(null,!1)}}).single("picUrl")),z.use(c.a.urlencoded({extended:!0})),z.use(g()()),z.use(a()()),z.use(h()("combined",{stream:W})),z.use((function(e,t,n,r){var o=e.statusCode||500,a=e.message,i=e.data;n.status(o).send({msg:a,data:i})})),z.use("/",I.a),z.get("*",(function(e,t,n){var r=Object(b.createStore)(_.a,{},Object(b.applyMiddleware)(w.a)),o=Object(S.matchRoutes)(j.a,e.path).map((function(t){var n=t.route,o=t.match;return console.log(o,"***************match****************>",e.userId),n.loadedData?n.loadedData(r,o.params._id,e.isLoggedIn,e.user,o.path.split("/")[1]):Promise.resolve(null)}));Promise.all(o).then((function(n){var o={},a=Object(f.renderToString)(u.a.createElement(R.Provider,{store:r},u.a.createElement(d.StaticRouter,{context:o,location:e.path},u.a.createElement("div",null,Object(S.renderRoutes)(j.a)))));if(o.url)return t.redirect(301,o.url);o.NotFound&&t.status(404),t.send('\n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1"/>\n        <link href="https://fonts.googleapis.com/css?family=Righteous&display=swap" rel="stylesheet" >\n        <link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap" rel="stylesheet">\n        <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">\n        <link href="/style.css" rel="stylesheet" type="text/css">\n        <link rel="shortcut icon" href="/">\n        <basehref="/">\n        <script src="https://kit.fontawesome.com/a076d05399.js"><\/script>\n        <title>server</title>\n      </head>\n        <body>\n          <div id="root">'.concat(a,"</div>\n          <script>\n            window.INITIAL_STATE =").concat(O()(r.getState()),'\n          <\/script>\n          <script src="/bundle.js" charset="utf-8"><\/script>\n        </body>\n      </html>\n      '))}))})),N.a.connect(H,{useNewUrlParser:!0,useUnifiedTopology:!0}).then((function(e){var t=z.listen(process.env.PORT||3e3,(function(){return console.log("yesssssss")}));n(26).init(t).on("connection",(function(e){console.log("client connected")}))})).catch((function(e){console.log(e)}))}.call(this,"/")},function(e,t){e.exports=require("@babel/polyfill/noConflict")},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(9),o=n(17),a=n(18),i=n(10)("body-parser:json"),c=n(11),s=n(12);e.exports=function(e){var t=e||{},n="number"!=typeof t.limit?r.parse(t.limit||"100kb"):t.limit,p=!1!==t.inflate,f=t.reviver,d=!1!==t.strict,m=t.type||"application/json",h=t.verify||!1;if(!1!==h&&"function"!=typeof h)throw new TypeError("option verify must be function");var y="function"!=typeof m?function(e){return function(t){return Boolean(s(t,e))}}(m):m;function g(e){if(0===e.length)return{};if(d){var t=(n=e,u.exec(n)[1]);if("{"!==t&&"["!==t)throw i("strict violation"),function(e,t){var n=e.indexOf(t),r=e.substring(0,n)+"#";try{throw JSON.parse(r),new SyntaxError("strict violation")}catch(e){return l(e,{message:e.message.replace("#",t),stack:e.stack})}}(e,t)}var n;try{return i("parse json"),JSON.parse(e,f)}catch(e){throw l(e,{message:e.message,stack:e.stack})}}return function(e,t,r){if(e._body)return i("body already parsed"),void r();if(e.body=e.body||{},!s.hasBody(e))return i("skip empty body"),void r();if(i("content-type %j",e.headers["content-type"]),!y(e))return i("skip parsing"),void r();var u=function(e){try{return(o.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||"utf-8";if("utf-"!==u.substr(0,4))return i("invalid charset"),void r(a(415,'unsupported charset "'+u.toUpperCase()+'"',{charset:u,type:"charset.unsupported"}));c(e,t,r,g,i,{encoding:u,inflate:p,limit:n,verify:h})}};var u=/^[\x20\x09\x0a\x0d]*(.)/;function l(e,t){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r];"stack"!==o&&"message"!==o&&delete e[o]}return e.stack=t.stack.replace(e.message,t.message),e.message=t.message,e}},function(e,t){e.exports=require("raw-body")},function(e,t){e.exports=require("iconv-lite")},function(e,t){e.exports=require("on-finished")},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(9),o=n(10)("body-parser:raw"),a=n(11),i=n(12);e.exports=function(e){var t=e||{},n=!1!==t.inflate,c="number"!=typeof t.limit?r.parse(t.limit||"100kb"):t.limit,s=t.type||"application/octet-stream",u=t.verify||!1;if(!1!==u&&"function"!=typeof u)throw new TypeError("option verify must be function");var l="function"!=typeof s?function(e){return function(t){return Boolean(i(t,e))}}(s):s;function p(e){return e}return function(e,t,r){return e._body?(o("body already parsed"),void r()):(e.body=e.body||{},i.hasBody(e)?(o("content-type %j",e.headers["content-type"]),l(e)?void a(e,t,r,p,o,{encoding:null,inflate:n,limit:c,verify:u}):(o("skip parsing"),void r())):(o("skip empty body"),void r()))}}},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(9),o=n(17),a=n(10)("body-parser:text"),i=n(11),c=n(12);e.exports=function(e){var t=e||{},n=t.defaultCharset||"utf-8",s=!1!==t.inflate,u="number"!=typeof t.limit?r.parse(t.limit||"100kb"):t.limit,l=t.type||"text/plain",p=t.verify||!1;if(!1!==p&&"function"!=typeof p)throw new TypeError("option verify must be function");var f="function"!=typeof l?function(e){return function(t){return Boolean(c(t,e))}}(l):l;function d(e){return e}return function(e,t,r){if(e._body)return a("body already parsed"),void r();if(e.body=e.body||{},!c.hasBody(e))return a("skip empty body"),void r();if(a("content-type %j",e.headers["content-type"]),!f(e))return a("skip parsing"),void r();var l=function(e){try{return(o.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||n;i(e,t,r,d,a,{encoding:l,inflate:s,limit:u,verify:p})}}},function(e,t,n){"use strict";
/*!
 * body-parser
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(9),o=n(17),a=n(18),i=n(10)("body-parser:urlencoded"),c=n(22)("body-parser"),s=n(11),u=n(12);e.exports=function(e){var t=e||{};void 0===t.extended&&c("undefined extended: provide extended option");var n=!1!==t.extended,l=!1!==t.inflate,d="number"!=typeof t.limit?r.parse(t.limit||"100kb"):t.limit,m=t.type||"application/x-www-form-urlencoded",h=t.verify||!1;if(!1!==h&&"function"!=typeof h)throw new TypeError("option verify must be function");var y=n?function(e){var t=void 0!==e.parameterLimit?e.parameterLimit:1e3,n=f("qs");if(isNaN(t)||t<1)throw new TypeError("option parameterLimit must be a positive number");isFinite(t)&&(t|=0);return function(e){var r=p(e,t);if(void 0===r)throw i("too many parameters"),a(413,"too many parameters",{type:"parameters.too.many"});var o=Math.max(100,r);return i("parse extended urlencoding"),n(e,{allowPrototypes:!0,arrayLimit:o,depth:1/0,parameterLimit:t})}}(t):function(e){var t=void 0!==e.parameterLimit?e.parameterLimit:1e3,n=f("querystring");if(isNaN(t)||t<1)throw new TypeError("option parameterLimit must be a positive number");isFinite(t)&&(t|=0);return function(e){if(void 0===p(e,t))throw i("too many parameters"),a(413,"too many parameters",{type:"parameters.too.many"});return i("parse urlencoding"),n(e,void 0,void 0,{maxKeys:t})}}(t),g="function"!=typeof m?function(e){return function(t){return Boolean(u(t,e))}}(m):m;function b(e){return e.length?y(e):{}}return function(e,t,n){if(e._body)return i("body already parsed"),void n();if(e.body=e.body||{},!u.hasBody(e))return i("skip empty body"),void n();if(i("content-type %j",e.headers["content-type"]),!g(e))return i("skip parsing"),void n();var r=function(e){try{return(o.parse(e).parameters.charset||"").toLowerCase()}catch(e){return}}(e)||"utf-8";if("utf-8"!==r)return i("invalid charset"),void n(a(415,'unsupported charset "'+r.toUpperCase()+'"',{charset:r,type:"charset.unsupported"}));s(e,t,n,b,i,{debug:i,encoding:r,inflate:l,limit:d,verify:h})}};var l=Object.create(null);function p(e,t){for(var n=0,r=0;-1!==(r=e.indexOf("&",r));)if(r++,++n===t)return;return n}function f(e){var t=l[e];if(void 0!==t)return t.parse;switch(e){case"qs":t=n(53);break;case"querystring":t=n(54)}return l[e]=t,t.parse}},function(e,t){e.exports=require("qs")},function(e,t){e.exports=require("querystring")},function(e,t,n){var r=n(56),o=n(15),a=(n(16),n(57)),i=n(24),c=n(25),s=n(58),u=n(26),l=n(27),p=n(60),f=n(28).validationResult,d=n(61);d.config.update({region:"us-east-1"}),t.getRecipes=function(e,t,n){console.log("--getRecipes--",e.params._id,e.url,"---"),"null"===e.params._id.split("-")[0]?i.find().populate("userId").sort({createdAt:-1}).then((function(n){console.log(n,"recipesssssss----\x3e"),t.status(200).send({data:n,pagedata:n.slice(10*e.params._id.split("-")[1]-10,10*e.params._id.split("-")[1])})})).catch((function(e){var t=new Error(e);t.statusCode=500,n(t)})):i.find({userId:{$ne:e.params._id.split("-")[0]}}).populate("userId").sort({createdAt:-1}).then((function(n){console.log("recipesssssss"),t.status(200).send({data:n,pagedata:n.slice(10*e.params._id.split("-")[1]-10,10*e.params._id.split("-")[1])})})).catch((function(e){var t=new Error(e);t.statusCode=500,n(t)}))},t.getOwnerRecipes=function(e,t,n){console.log("--getOwnerRecipes--",e.url,e.params._id,"---"),console.log("--getOwnerRecipes--",e.params._id.split("-")[0],e.params._id.split("-")[1],"---"),"0"!==e.params._id.split("-")[0]?i.find({userId:e.params._id.split("-")[0]}).populate("userId").sort({createdAt:-1}).then((function(n){console.log(n,"get owner recipies"),n.length>10?t.send({ownerRecipes:n,ownerRecipespage:n.slice(10*e.params._id.split("-")[1]-10,10*e.params._id.split("-")[1])}):t.send({ownerRecipes:n,ownerRecipespage:n})})):t.send({ownerRecipes:[],ownerRecipespage:[]})},t.getOwnerRecipesLoad=function(e,t,n){console.log("--getOwnerRecipesLoad--",e.params,"---"),console.log("--getOwnerRecipesLoads--","0"!==e.params._id.split("-")[0],"---"),"0"!==e.params._id.split("-")[0]?i.find({userId:e.params._id.split("-")[0]}).populate("userId").sort({createdAt:-1}).then((function(n){console.log(n,"get owner recipies"),n.length>10?t.send({ownerRecipes:n,ownerRecipespage:n.slice(10*e.params._id.split("-")[1]-10,10*e.params._id.split("-")[1])}):t.send({ownerRecipes:n,ownerRecipespage:n})})):t.send({ownerRecipes:[],ownerRecipespage:[]})},t.getRecipe=function(e,t,n){var r=e.params._id;console.log("--getRecipe--",e.params,e.session,"---"),i.findById(r).then((function(e){if(console.log(e,">>>,1recipe",!e),!e){var n=new Error("recipe was not found");throw n.statusCode=404,n}t.status(200).send({data:e})})).catch((function(e){var t=new Error(e);t.statusCode=500,n(t)}))},t.postRecipe=function(e,t,n){console.log("--postRecipe--",e.body,"<----\x3e",e.userId,"---");var r=f(e),o=e.file;console.log(o,"*********"),o?r.isEmpty()?c.find({_id:e.userId}).then((function(r){console.log(r[0].name,"user[0].name");var a=new i({name:e.body.name,picUrl:o.path,description:e.body.description,price:e.body.price,userId:e.userId,author:r[0].name,date:new Date,stars:0,category:e.body.category});a.save().then((function(e){console.log(e,"pagerecipe made"),u.getIO().emit("recipes",{action:"create",recipe:a}),t.send(e._id)})).catch((function(e){var t=new Error(e);t.statusCode=500,n(t)}))})):(t.status(status).json({meg:message,data:data}),t.send({msg:"wrong text format"})):t.send({msg:"wrong image format"})},t.postEditRecipe=function(e,t,n){console.log("--postEditRecipe--",e.user,e.body,"---");var r=f(e),o=e.file;console.log(o,"update++"),r.isEmpty()?i.findById(e.body._id).then((function(n){n.name=e.body.name,n.price=e.body.price,o&&(a.deletFile(n.picUrl),n.picUrl=o.path),n.description=e.body.description,n.save().then((function(e){console.log("UPDATED recipe!"),u.getIO().emit("recipes",{action:"edit",recipe:n}),t.status(200).send({done:!0})}))})).catch((function(e){var t=new Error(e);t.statusCode=500,n(t)})):(t.status(status).json({meg:message,data:data}),t.send({msg:"wrong text format"}))},t.postDeleteRecipe=function(e,t,n){var r=e.params._id;return console.log("--postdeleteRecipe--",e.body,e.userId,"---"),a.deletFile(e.body.picUrl),i.findByIdAndRemove(r).then((function(){console.log("DESTROYED product"),u.getIO().emit("recipes",{action:"edit"}),t.send({done:!0})})).catch((function(e){return console.log(e)}))},t.getCart=function(e,t,n){console.log("--getCart--",e.userId,"---"),c.find({_id:e.userId}).then((function(e){console.log(e,"cart user"),t.send({cart:e[0].cart})}))},t.ownerCart=function(e,t,n){console.log("--ownerCart--",e.params._id,e.user,"---"),c.find({_id:e.params._id}).then((function(e){console.log(e,"ownecart"),t.send({cart:e[0].cart})}))},t.postCart=function(e,t,n){return console.log("--postCart--",e.userId,"---"),i.findById(e.body._id).then((function(t){return c.find({_id:e.userId}).then((function(e){return console.log(e,"postcart user"),e[0].addToCart(t)}))})).then((function(e){return t.status(200).send(e)})).catch((function(e){console.log(e,"postCart"),t.status(500).send(e)}))},t.deleteFromCart=function(e,t,n){console.log("--deleteFromCart--",e.body,"---"),c.find({_id:e.body.id}).then((function(n){return console.log(n,"+_+_+_+_"),n[0].deleteFromCart(e.body.data).then((function(e){return t.status(200).send(e)})).catch((function(e){console.log(e,"deleteFromCart"),t.status(500).send(e)}))}))},t.getSubmitOrder=function(e,t,n){console.log("--getSubmitOrder--",e.params._id,e.user,"---"),t.send({orders:e.user.orders})},t.getOwnerOrder=function(e,t,n){console.log("--getOwnerOrder--",e.params,e.user,"---"),c.find({_id:e.params._id}).then((function(e){console.log(e,"user of orders"),t.send({orders:e[0].orders})}))},t.postSubmitOrder=function(e,t,n){return console.log("--postSubmitOrder--",e.params._id,e.user,"---"),e.user.addToOrder().then((function(e){console.log(e,"req.user.orders response"),t.redirect("/submit-order")})).catch((function(e){return console.log(e)}))},t.getInvoice=function(e,t,n){console.log("--getInvoice--",e.params,e.body,e.user,"---"),c.find({_id:e.user._id}).then((function(n){console.log(n[0],"user");var r=n[0].orders.find((function(t){return t._id.toString()===e.params.orderId}));console.log(r,"order==","invoice-".concat(r._id,".pdf"));var a=new s;t.setHeader("Content-Type","application/pdf"),t.setHeader("Content-Disposition","attachment; filename=quote.pdf"),a.pipe(o.createWriteStream("data/invoices/invoice-".concat(r._id,".pdf"))),a.pipe(t),a.fontSize(12).text("invoice-".concat(r._id)),a.text("------------------------------------"),r.items.map((function(e){a.fontSize(10).text("".concat(e.name,"--------").concat(e.quantity,"*").concat(e.unitPrice))})),a.text("------------------------------------"),a.fontSize(12).text("total:".concat(r.total)),a.end()}))},t.postUser=function(e,t,n){console.log("--postUser--",e.body,"---");var r=f(e);if(r.isEmpty())return p.hash(e.body.password,12).then((function(n){new c({name:e.body.name,email:e.body.email,password:n,cart:{item:[],total:0},orders:[]}).save().then((function(n){t.send({newUser:"1"}),console.log(e.body.email,"req.body.email");var r=new d.SES({apiVersion:"2010-12-01"}).sendEmail({Destination:{ToAddresses:["lailysarvarian@gmail.com"]},Message:{Body:{Html:{Charset:"UTF-8",Data:"<p> yeyyy</p>"},Text:{Charset:"UTF-8",Data:"TEXT_FORMAT_BODY"}},Subject:{Charset:"UTF-8",Data:"Test email"}},Source:"laily@lailys.com"}).promise();return r.then((function(e){console.log(e.MessageId)})).catch((function(e){console.error(e,e.stack)})),r.then((function(e){console.log("email has been sent")})).catch((function(e){console.error(e,e.stack)}))}))})).catch((function(e){console.log(e,"deleteFromCart"),t.status(500).send(e)}));console.log(r.array(),"err.array()"),t.send({msg:r.array()})},t.postLogin=function(e,t,n){console.log("--postLogin--",e.body,"---");var r=f(e);r.isEmpty()?c.findOne({email:e.body.email}).then((function(n){n?n&&p.compare(e.body.password,n.password).then((function(e){if(e){if(e){var r=l.sign({email:n.email,_id:n._id.toString()},"somesupersecretsecret",{expiresIn:"1h"});t.send({token:r,_id:n._id.toString()})}}else t.send({msg:"no user with this information exists"})})):t.send({msg:"no user with this information exists"})})).catch((function(e){console.log(e,"deleteFromCart"),t.status(500).send(e)})):(console.log(r.array()[0],"err.array()"),t.send({msg:r.array()[0]}))},t.postNewPasswordRequest=function(e,t,n){console.log("--postNewPasswordRequest--",e.body,"---"),r.randomBytes(32,(function(n,r){if(console.log("-----"),n)return t.redirect("/");var o=r.toString("hex");c.findOne({email:e.body.email}).then((function(e){if(e)return e.resetToken=o,e.resetTokenEXP=Date.now()+36e5,e.save();t.send({exist:-1})})).then((function(e){t.send({exist:1}),d.config.update({region:"us-east-1"});var n={Destination:{ToAddresses:["lailysarvarian@gmail.com"]},Message:{Body:{Html:{Charset:"UTF-8",Data:'<p> <a href="http://localhost:3000/reset-password/'.concat(o,'">link</a> </p>')},Text:{Charset:"UTF-8",Data:"TEXT_FORMAT_BODY"}},Subject:{Charset:"UTF-8",Data:"Test email"}},Source:"laily@lailys.com"},r=new d.SES({apiVersion:"2010-12-01"}).sendEmail(n).promise();r.then((function(e){console.log(e.MessageId)})).catch((function(e){console.error(e,e.stack)})),r.then((function(e){console.log(e.MessageId)})).catch((function(e){console.error(e,e.stack)}))})).catch((function(e){return console.log(e)}))}))},t.postNewPassword=function(e,t,n){console.log("--postNewPassword --",e.body,"---"),c.findOne({resetToken:e.body.token,resetTokenEXP:{$gt:Date.now()}}).then((function(n){e.body.password!==e.body.passwordConfirmation?t.send({passUPdated:"00"}):p.hash(e.body.password,12).then((function(e){n.password=e,n.save().then((function(e){t.send({passwordOwner:n._id.toString()})}))}))})).catch((function(e){return console.log(e)}))},t.postSubmitComment=function(e,t,n){console.log("--postSubmitComment--",e.body,"---"),c.find({_id:e.body.userId}).then((function(n){i.find({_id:e.body.id}).then((function(r){return r[0].addComment(e.body.data,n[0].name).then((function(e){u.getIO().emit("recipes",{action:"edit"}),t.send({data:"posted"})})).catch((function(e){console.log(e,"comment"),t.status(500).send(e)}))}))}))},t.postLogout=function(e,t,n){console.log("--postLogout--",e.body,"---"),t.send({auth:!1})},t.getLogin=function(e,t,n){console.log(e.session.isLoggedIn,"req.session.isLoggedIn"),t.send({auth:!1})},t.getAuth=function(e,t,n){console.log("--getAuth--",e,"---"),t.send({auth:!0})}},function(e,t){e.exports=require("crypto")},function(e,t,n){var r=n(15);t.deletFile=function(e){r.unlink(e,(function(e){if(e)throw e}))}},function(e,t){e.exports=require("pdfkit")},function(e,t){e.exports=require("socket.io")},function(e,t){e.exports=require("bcryptjs")},function(e,t){e.exports=require("aws-sdk")},function(e,t,n){var r=n(27);e.exports=function(e,t,n){console.log(e.get("Authorization"),"req.get('Authorization')");var o=e.get("Authorization");if(!o){var a=new Error("Not authenticated.");throw a.statusCode=401,a}var i,c=o.split(" ")[1];try{i=r.verify(c,"somesupersecretsecret")}catch(e){console.log(e,"erryyyyyy"),t.send({msg:"jwt expired"})}if(!i){console.log(err,"erryyyyyy");var s=new Error("Not authenticated.");throw s.statusCode=401,s}e.userId=i._id,n()}},function(e,t){e.exports=require("https")}]);